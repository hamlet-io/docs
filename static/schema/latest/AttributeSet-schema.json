{
  "$id": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "definitions": {
    "alert": {
      "additionalProperties": false,
      "description": "Configuration of alerts that monitor component resources",
      "properties": {
        "Comparison": {
          "default": "Threshold",
          "type": "string"
        },
        "Description": {
          "type": "string"
        },
        "DimensionSource": {
          "default": "Resource",
          "description": "The source of the alert dimensions - resource lookup or explicit configuration",
          "enum": [
            "Resource",
            "Configured"
          ],
          "type": "string"
        },
        "Dimensions": {
          "additionalProperties": false,
          "description": "Explicit configured dimensions",
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Key": {
                  "description": "The Key of the dimension",
                  "type": "string"
                },
                "SettingEnvName": {
                  "description": "A setting name as env that will provide the dimension value",
                  "type": "string"
                },
                "Value": {
                  "description": "The value of the dimension to match",
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        },
        "Enabled": {
          "default": true,
          "description": "Should the alert be created",
          "type": "boolean"
        },
        "Metric": {
          "type": "string"
        },
        "MissingData": {
          "default": "notBreaching",
          "type": "string"
        },
        "Name": {
          "type": "string"
        },
        "Namespace": {
          "type": "string"
        },
        "Operator": {
          "default": "GreaterThanOrEqualToThreshold",
          "type": "string"
        },
        "Periods": {
          "default": 1,
          "type": "number"
        },
        "ReportOk": {
          "default": false,
          "type": "boolean"
        },
        "Resource": {
          "additionalProperties": false,
          "description": "Provide a component resource to determine the dimensions of the metric",
          "properties": {
            "Id": {
              "type": "string"
            },
            "Type": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "Severity": {
          "default": "info",
          "enum": [
            "debug",
            "info",
            "warn",
            "error",
            "fatal"
          ],
          "type": "string"
        },
        "Statistic": {
          "default": "Sum",
          "type": "string"
        },
        "Threshold": {
          "default": 1,
          "type": "number"
        },
        "Time": {
          "default": 300,
          "type": "number"
        },
        "Unit": {
          "default": "Count",
          "type": "string"
        }
      },
      "required": [
        "Metric",
        "Name"
      ],
      "type": "object"
    },
    "autoscalegroup": {
      "additionalProperties": false,
      "description": "Control how a virtual machine based autoscaling group behaves",
      "properties": {
        "ActivityCooldown": {
          "default": 30,
          "type": "number"
        },
        "AlwaysReplaceOnUpdate": {
          "default": false,
          "description": "Replace instances on every update action",
          "type": "boolean"
        },
        "DetailedMetrics": {
          "default": true,
          "description": "Enable the collection of autoscale group detailed metrics",
          "type": "boolean"
        },
        "MinSuccessInstances": {
          "default": 75,
          "description": "The minimum percantage of instances that must sucessfully update",
          "type": "number"
        },
        "MinUpdateInstances": {
          "default": 1,
          "description": "The minimum number of instances which must be available during an update",
          "type": "number"
        },
        "ReplaceCluster": {
          "default": false,
          "description": "When set to true a brand new cluster will be built, if false the instances in the current cluster will be replaced",
          "type": "boolean"
        },
        "StartupTimeout": {
          "default": "15M",
          "description": "How long to wait for a cfn-signal to be received from a host",
          "type": "string"
        },
        "UpdatePauseTime": {
          "default": "10M",
          "description": "How long to pause betweeen updates of instances",
          "type": "string"
        }
      },
      "type": "object"
    },
    "aws_antivirus": {
      "additionalProperties": false,
      "description": "Standard Configuration options to define antivirus configuration",
      "properties": {
        "ControlledFolders": {
          "additionalProperties": false,
          "properties": {
            "AllowedApps": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "Folders": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "Exclusions": {
          "additionalProperties": false,
          "properties": {
            "FilePaths": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "FileTypes": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "Folders": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "Mode": {
          "default": "Active",
          "enum": [
            "Active",
            "Passive",
            "Disabled"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "aws_computeimage": {
      "additionalProperties": false,
      "description": "AWS Specific overrides to source compute images",
      "properties": {
        "Source": {
          "default": "Reference",
          "description": "Where to source the image id from - Reference: uses the Regions AMIs reference property to find the image",
          "enum": [
            "Reference",
            "aws:AMI",
            "aws:SSMParam"
          ],
          "type": [
            "array",
            "boolean",
            "number",
            "object",
            "string"
          ]
        },
        "Source:Reference": {
          "additionalProperties": false,
          "properties": {
            "OS": {
              "default": "Centos",
              "description": "The OS Image family defined in the Region AMI",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            },
            "Type": {
              "default": "EC2",
              "description": "The image Type defined under the family in the Region AMI",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            }
          },
          "type": "object"
        },
        "aws:Source:AMI": {
          "additionalProperties": false,
          "description": "Use an explicit AMI for the image ",
          "properties": {
            "ImageId": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "aws:Source:SSMParam": {
          "additionalProperties": false,
          "description": "Lookup the image Id using the SSM ParameterStore",
          "properties": {
            "Name": {
              "default": "/aws/service/ami-amazon-linux-latest/amzn-ami-hvm-x86_64-ebs",
              "description": "The name of the parameter to lookup",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "aws_ecs_computeimage": {
      "additionalProperties": false,
      "description": "AWS ECS Specific overrides to source compute images",
      "properties": {
        "Source": {
          "default": "Reference",
          "description": "Where to source the image id from - Reference: uses the Regions AMIs reference property to find the image",
          "enum": [
            "Reference",
            "aws:AMI",
            "aws:SSMParam"
          ],
          "type": [
            "array",
            "boolean",
            "number",
            "object",
            "string"
          ]
        },
        "Source:Reference": {
          "additionalProperties": false,
          "properties": {
            "OS": {
              "default": "Centos",
              "description": "The OS Image family defined in the Region AMI",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            },
            "Type": {
              "default": "ECS",
              "description": "The image Type defined under the family in the Region AMI",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            }
          },
          "type": "object"
        },
        "aws:Source:AMI": {
          "additionalProperties": false,
          "description": "Use an explicit AMI for the image ",
          "properties": {
            "ImageId": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "aws:Source:SSMParam": {
          "additionalProperties": false,
          "properties": {
            "Name": {
              "default": "/aws/service/ecs/optimized-ami/amazon-linux/recommended/image_id",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "aws_operatingsystem": {
      "additionalProperties": false,
      "description": "Standard Configuration options to define an operating system",
      "properties": {
        "Architecture": {
          "description": "The CPU Architecture used",
          "enum": [
            "i386",
            "x86_64",
            "arm64"
          ],
          "type": "string"
        },
        "Distribution": {
          "default": "awslinux",
          "description": "The distribution of the operating system",
          "type": "string"
        },
        "Family": {
          "default": "linux",
          "description": "The broad family of operating system",
          "enum": [
            "linux",
            "windows",
            "macos"
          ],
          "type": "string"
        },
        "MajorVersion": {
          "default": "1",
          "description": "The major version of the distribution",
          "type": "string"
        },
        "MinorVersion": {
          "description": "The minor version of the distribution major version",
          "type": "string"
        }
      },
      "type": "object"
    },
    "aws_s3_notification": {
      "additionalProperties": false,
      "description": "AWS S3 specific configuration options for notifications",
      "properties": {
        "Enabled": {
          "default": true,
          "type": "boolean"
        },
        "Events": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "default": [
            "create"
          ],
          "enum": [
            "create",
            "delete",
            "restore",
            "reducedredundancy"
          ],
          "type": "array"
        },
        "Links": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
        },
        "Prefix": {
          "type": "string"
        },
        "Suffix": {
          "type": "string"
        },
        "aws:QueuePermissionMigration": {
          "default": false,
          "description": "Deprecation alert: set to true once policy updated for queue",
          "type": "boolean"
        },
        "aws:TopicPermissionMigration": {
          "default": false,
          "description": "Deprecation alert: set to true once policy updated for topic",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "backupwindow": {
      "additionalProperties": false,
      "description": "Standard Configuration options to define a backup window",
      "properties": {
        "TimeOfDay": {
          "default": "01:00",
          "type": "string"
        },
        "TimeZone": {
          "default": "UTC",
          "type": "string"
        }
      },
      "type": "object"
    },
    "computeimage": {
      "additionalProperties": false,
      "description": "Configuration for the source of compute instance images",
      "properties": {
        "Source": {
          "const": "Reference",
          "default": "Reference",
          "description": "Where to source the image id from - Reference: uses the Regions AMIs reference property to find the image",
          "type": [
            "array",
            "boolean",
            "number",
            "object",
            "string"
          ]
        },
        "Source:Reference": {
          "additionalProperties": false,
          "properties": {
            "OS": {
              "default": "Centos",
              "description": "The OS Image family defined in the Region AMI",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            },
            "Type": {
              "default": "EC2",
              "description": "The image Type defined under the family in the Region AMI",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "containertask": {
      "additionalProperties": false,
      "description": "Descirbes each container that will be used as part of a service or task",
      "properties": {
        "Alerts": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/alert"
        },
        "ContainerLogGroup": {
          "default": false,
          "type": "boolean"
        },
        "ContainerNetworkLinks": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "type": "array"
        },
        "Cpu": {
          "description": "The CPU share to assign to the container",
          "type": "number"
        },
        "Extensions": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "description": "Extensions to invoke as part of component processing",
          "type": "array"
        },
        "Gpu": {
          "description": "The number of physical GPUs to assign to the container",
          "type": "number"
        },
        "Image": {
          "additionalProperties": false,
          "description": "Set the source of the components image",
          "properties": {
            "Source": {
              "default": "Registry",
              "description": "The source of the image",
              "enum": [
                "registry",
                "containerregistry"
              ],
              "type": "string"
            },
            "Source:containerregistry": {
              "additionalProperties": false,
              "description": "A docker container registry to source the image from",
              "properties": {
                "Image": {
                  "description": "The docker image that you want to use",
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "required": [
            "Source"
          ],
          "type": "object"
        },
        "InitProcess": {
          "default": false,
          "description": "Enable a docker based init process to manage processes",
          "type": "boolean"
        },
        "Links": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
        },
        "LocalLogging": {
          "default": false,
          "type": "boolean"
        },
        "LogDriver": {
          "default": "awslogs",
          "enum": [
            "awslogs",
            "json-file",
            "fluentd"
          ],
          "type": "string"
        },
        "LogMetrics": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/logmetric"
        },
        "MaximumMemory": {
          "description": "Set to 0 to not set a maximum",
          "type": "number"
        },
        "MemoryReservation": {
          "type": "number"
        },
        "Ports": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Container": {
                  "type": "string"
                },
                "DynamicHostPort": {
                  "default": false,
                  "type": "boolean"
                },
                "IPAddressGroups": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "LB": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/lbattach"
                },
                "Registry": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/srvregattach"
                }
              }
            }
          },
          "type": "object"
        },
        "Privileged": {
          "default": false,
          "type": "boolean"
        },
        "Profiles": {
          "additionalProperties": false,
          "properties": {
            "Alert": {
              "default": "default",
              "type": "string"
            }
          },
          "type": "object"
        },
        "RunCapabilities": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "type": "array"
        },
        "RunMode": {
          "description": "A per container setting which can be used by the app to determine run mode for a container in a task - defaults to the second half of a dash separated id",
          "type": "string"
        },
        "Ulimits": {
          "additionalProperties": false,
          "description": "Linux OS based limits for the container",
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "HardLimit": {
                  "default": 1024,
                  "description": "The OS level hard limit to apply",
                  "type": "number"
                },
                "Name": {
                  "description": "The name of the ulimit to apply",
                  "type": "string"
                },
                "SoftLimit": {
                  "default": 1024,
                  "description": "The User level limit to apply",
                  "type": "number"
                }
              },
              "required": [
                "Name"
              ]
            }
          },
          "type": "object"
        },
        "Version": {
          "description": "Override the version from the deployment unit",
          "type": "string"
        }
      },
      "required": [
        "MemoryReservation"
      ],
      "type": "object"
    },
    "contextpath": {
      "additionalProperties": false,
      "description": "Combined with the getContextPath() function creates a name or path based on your current context",
      "properties": {
        "Custom": {
          "description": "The custom string to include if custom is included in the path",
          "type": "string"
        },
        "IncludeInPath": {
          "additionalProperties": false,
          "properties": {
            "Account": {
              "default": false,
              "description": "The name of the Account",
              "type": "boolean"
            },
            "Component": {
              "default": false,
              "description": "The name of the component",
              "type": "boolean"
            },
            "Custom": {
              "default": false,
              "description": "Include a custom string",
              "type": "boolean"
            },
            "Environment": {
              "default": false,
              "description": "The name of the environment",
              "type": "boolean"
            },
            "Instance": {
              "default": false,
              "description": "The name of the instance",
              "type": "boolean"
            },
            "Product": {
              "default": true,
              "description": "The name of the product",
              "type": "boolean"
            },
            "ProviderId": {
              "default": false,
              "description": "The Provider Id for the account",
              "type": "boolean"
            },
            "Segment": {
              "default": true,
              "description": "The name of the segment",
              "type": "boolean"
            },
            "Tier": {
              "default": false,
              "description": "The name of the tier",
              "type": "boolean"
            },
            "Version": {
              "default": false,
              "description": "The name of the version",
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "Order": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "default": [
            "Account",
            "ProviderId",
            "Product",
            "Environment",
            "Segment",
            "Tier",
            "Component",
            "Instance",
            "Version",
            "Host",
            "Custom"
          ],
          "type": "array"
        },
        "Style": {
          "default": "single",
          "description": "Provide the value as a single string or a file system style path",
          "enum": [
            "single",
            "path"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "contextpath_fullpath": {
      "additionalProperties": false,
      "description": "Creates a Segment unique context path by default",
      "properties": {
        "Custom": {
          "description": "The custom string to include if custom is included in the path",
          "type": "string"
        },
        "IncludeInPath": {
          "additionalProperties": false,
          "properties": {
            "Account": {
              "default": false,
              "description": "The name of the Account",
              "type": "boolean"
            },
            "Component": {
              "default": true,
              "description": "The name of the component",
              "type": "boolean"
            },
            "Custom": {
              "default": false,
              "description": "Include a custom string",
              "type": "boolean"
            },
            "Environment": {
              "default": true,
              "description": "The name of the environment",
              "type": "boolean"
            },
            "Instance": {
              "default": true,
              "description": "The name of the instance",
              "type": "boolean"
            },
            "Product": {
              "default": true,
              "description": "The name of the product",
              "type": "boolean"
            },
            "ProviderId": {
              "default": false,
              "description": "The Provider Id for the account",
              "type": "boolean"
            },
            "Segment": {
              "default": true,
              "description": "The name of the segment",
              "type": "boolean"
            },
            "Tier": {
              "default": true,
              "description": "The name of the tier",
              "type": "boolean"
            },
            "Version": {
              "default": true,
              "description": "The name of the version",
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "Order": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "default": [
            "Account",
            "ProviderId",
            "Product",
            "Environment",
            "Segment",
            "Tier",
            "Component",
            "Instance",
            "Version",
            "Host",
            "Custom"
          ],
          "type": "array"
        },
        "Style": {
          "default": "path",
          "description": "Provide the value as a single string or a file system style path",
          "enum": [
            "single",
            "path"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "core_profile": {
      "additionalProperties": false,
      "description": "Internal: desribes the base profiles for all components",
      "properties": {
        "Profiles": {
          "additionalProperties": false,
          "properties": {
            "Baseline": {
              "default": "default",
              "description": "The profile used to lookup standard services provided by the segment baseline",
              "type": "string"
            },
            "Deployment": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "description": "A list of deployment profiles to apply to this component",
              "type": "array"
            },
            "Placement": {
              "default": "default",
              "description": "The resource group assignment placement for resources in the component",
              "type": "string"
            },
            "Policy": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "description": "A list of enforced deployment profiles which override component configuraiton",
              "type": "array"
            },
            "Testing": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "description": "The testing profiles to apply to the component",
              "type": "array"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "dbsysevent": {
      "additionalProperties": false,
      "description": "Configuration of reported system notifications from component resources",
      "properties": {
        "Categories": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "default": [
            "_all"
          ],
          "description": "Optional array of event categories to report",
          "enum": [
            "availability",
            "backup",
            "configuration change",
            "creation",
            "deletion",
            "failover",
            "failure",
            "low storage",
            "maintenance",
            "notification",
            "read replica",
            "recovery",
            "restoration",
            "security",
            "_all"
          ],
          "type": "array"
        },
        "Links": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
        }
      },
      "type": "object"
    },
    "district": {
      "additionalProperties": false,
      "description": "Configuration of a district",
      "properties": {
        "InstanceOrder": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "description": "Layers whose configuration data should be included in the solution for an instance of the district",
          "type": "array"
        },
        "NamePartOrder": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "description": "Parts to be included in the name of an instance of the district. If not provided, the InstanceOrder is assumed. If not a defined name part, the part is assumed to be a layer.",
          "type": "array"
        },
        "NameParts": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Enabled": {
                  "default": true,
                  "description": "Should this part be ignored/omitted?",
                  "type": "boolean"
                },
                "Fixed": {
                  "description": "Include a fixed string",
                  "type": "string"
                },
                "Ignore": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "description": "An array of values to not include if encountered",
                  "type": "array"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "required": [
        "InstanceOrder"
      ],
      "type": "object"
    },
    "ecs_computeimage": {
      "additionalProperties": false,
      "description": "ECS Specific overrides to source compute images",
      "properties": {
        "Source": {
          "const": "Reference",
          "default": "Reference",
          "description": "Where to source the image id from - Reference: uses the Regions AMIs reference property to find the image",
          "type": [
            "array",
            "boolean",
            "number",
            "object",
            "string"
          ]
        },
        "Source:Reference": {
          "additionalProperties": false,
          "properties": {
            "OS": {
              "default": "Centos",
              "description": "The OS Image family defined in the Region AMI",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            },
            "Type": {
              "default": "ECS",
              "description": "The image Type defined under the family in the Region AMI",
              "type": [
                "array",
                "boolean",
                "number",
                "object",
                "string"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "environmentformat": {
      "additionalProperties": false,
      "description": "How to format environment variables from settings",
      "properties": {
        "AsFile": {
          "default": false,
          "type": "boolean"
        },
        "FileFormat": {
          "default": "json",
          "description": "The format of the file when using AsFile",
          "enum": [
            "json",
            "yaml"
          ],
          "type": "string"
        },
        "Json": {
          "additionalProperties": false,
          "properties": {
            "Escaped": {
              "default": true,
              "type": "boolean"
            },
            "Prefix": {
              "default": "json",
              "enum": [
                "json",
                ""
              ],
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "lbattach": {
      "additionalProperties": false,
      "description": "Attaches a components port to a load balancer",
      "properties": {
        "Component": {
          "type": "string"
        },
        "Instance": {
          "type": "string"
        },
        "LinkName": {
          "default": "lb",
          "type": "string"
        },
        "LinkRef": {
          "type": "string"
        },
        "PortMapping": {
          "type": "string"
        },
        "SubComponent": {
          "type": "string"
        },
        "Tier": {
          "type": "string"
        },
        "Type": {
          "const": "lbport",
          "default": "lbport",
          "type": "string"
        },
        "Version": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "link": {
      "additionalProperties": false,
      "description": "A relationship between Components.",
      "properties": {
        "ActiveRequired": {
          "description": "Require that the linked occurrence has been deployed and is active",
          "type": "boolean"
        },
        "Any": {
          "type": "string"
        },
        "Assignment": {
          "type": "string"
        },
        "AuthProvider": {
          "type": "string"
        },
        "Branch": {
          "type": "string"
        },
        "Client": {
          "type": "string"
        },
        "Component": {
          "type": "string"
        },
        "Connection": {
          "type": "string"
        },
        "DataBucket": {
          "type": "string"
        },
        "DataFeed": {
          "type": "string"
        },
        "Direction": {
          "description": "The direction the role applies to between the components",
          "type": "string"
        },
        "Enabled": {
          "default": true,
          "type": "boolean"
        },
        "Endpoint": {
          "type": "string"
        },
        "Environment": {
          "type": "string"
        },
        "Function": {
          "type": "string"
        },
        "IncludeInContext": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "description": "Include the attributes provided by this link in the environment context",
          "type": "array"
        },
        "Instance": {
          "type": "string"
        },
        "Key": {
          "type": "string"
        },
        "LinkRef": {
          "type": "string"
        },
        "Mount": {
          "type": "string"
        },
        "NetworkACL": {
          "type": "string"
        },
        "Platform": {
          "type": "string"
        },
        "PortMapping": {
          "type": "string"
        },
        "Product": {
          "type": "string"
        },
        "RegistryService": {
          "type": "string"
        },
        "Resource": {
          "type": "string"
        },
        "Role": {
          "description": "The role of the relationship between the components",
          "type": "string"
        },
        "Route": {
          "type": "string"
        },
        "RouteTable": {
          "type": "string"
        },
        "Rule": {
          "type": "string"
        },
        "Secret": {
          "type": "string"
        },
        "Segment": {
          "type": "string"
        },
        "Service": {
          "type": "string"
        },
        "SubComponent": {
          "type": "string"
        },
        "Task": {
          "type": "string"
        },
        "Tenant": {
          "type": "string"
        },
        "Tier": {
          "type": "string"
        },
        "Type": {
          "type": "string"
        },
        "Version": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "logmetric": {
      "additionalProperties": false,
      "description": "Generates a monitoring metric whenever the filter is matched in a log message",
      "properties": {
        "LogFilter": {
          "description": "A filter expression to apply to logs that will trigger a metric bump",
          "type": "string"
        }
      },
      "required": [
        "LogFilter"
      ],
      "type": "object"
    },
    "logwatcher": {
      "additionalProperties": false,
      "description": "Configuration for services which can act on log subscriptions",
      "properties": {
        "Links": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link",
          "description": "Links to the components with logs to watch"
        },
        "LogFilter": {
          "description": "A filter expression to apply to logs that will be sent to the watcher",
          "type": "string"
        }
      },
      "required": [
        "LogFilter"
      ],
      "type": "object"
    },
    "maintenancewindow": {
      "additionalProperties": false,
      "description": "Standard Configuration options to define a maintenance window",
      "properties": {
        "DayOfTheWeek": {
          "default": "Sunday",
          "enum": [
            "Sunday",
            "Monday",
            "Tuesday",
            "Wednesday",
            "Thursday",
            "Friday",
            "Saturday"
          ],
          "type": "string"
        },
        "TimeOfDay": {
          "default": "01:00",
          "type": "string"
        },
        "TimeZone": {
          "default": "UTC",
          "type": "string"
        }
      },
      "type": "object"
    },
    "module": {
      "additionalProperties": false,
      "description": "Defines the CMDB modules to load",
      "properties": {
        "Enabled": {
          "default": true,
          "description": "To enable loading the module in this profile",
          "type": "boolean"
        },
        "Name": {
          "description": "The name of the scneario to load",
          "type": "string"
        },
        "Parameters": {
          "additionalProperties": false,
          "description": "The parameter values to provide to the module",
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Key": {
                  "description": "The key of the parameter",
                  "type": "string"
                },
                "Value": {
                  "description": "The value of the parameter",
                  "type": [
                    "array",
                    "boolean",
                    "number",
                    "object",
                    "string"
                  ]
                }
              },
              "required": [
                "Key",
                "Value"
              ]
            }
          },
          "type": "object"
        },
        "Provider": {
          "description": "The provider name which offers the module",
          "type": "string"
        }
      },
      "required": [
        "Provider",
        "Name"
      ],
      "type": "object"
    },
    "networkrule": {
      "additionalProperties": false,
      "description": "Network Access rule configuration",
      "properties": {
        "Description": {
          "description": "A description that will be applied to the rule",
          "type": "string"
        },
        "IPAddressGroups": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "description": "A list of IP Address groups ids from the IPAddressGroups reference",
          "type": "array"
        },
        "Ports": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "description": "A list of port ids from the Ports reference",
          "type": "array"
        },
        "SecurityGroups": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "description": "A list of security groups or ids - for internal use only",
          "type": "array"
        }
      },
      "type": "object"
    },
    "objectstore_notification": {
      "additionalProperties": false,
      "description": "Event notification for object changes in an object store",
      "properties": {
        "Enabled": {
          "default": true,
          "type": "boolean"
        },
        "Events": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "default": [
            "create"
          ],
          "enum": [
            "create",
            "delete",
            "restore",
            "reducedredundancy"
          ],
          "type": "array"
        },
        "Links": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
        },
        "Prefix": {
          "type": "string"
        },
        "Suffix": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "operatingsystem": {
      "additionalProperties": false,
      "description": "Standard Configuration options to define an operating system",
      "properties": {
        "Architecture": {
          "description": "The CPU Architecture used",
          "enum": [
            "i386",
            "x86_64",
            "arm64"
          ],
          "type": "string"
        },
        "Distribution": {
          "description": "The distribution of the operating system",
          "type": "string"
        },
        "Family": {
          "description": "The broad family of operating system",
          "enum": [
            "linux",
            "windows",
            "macos"
          ],
          "type": "string"
        },
        "MajorVersion": {
          "description": "The major version of the distribution",
          "type": "string"
        },
        "MinorVersion": {
          "description": "The minor version of the distribution major version",
          "type": "string"
        }
      },
      "type": "object"
    },
    "ospatching": {
      "additionalProperties": false,
      "description": "OS Patching configuration definitions",
      "properties": {
        "Enabled": {
          "default": true,
          "description": "Enable automatic OS Patching",
          "type": "boolean"
        },
        "Schedule": {
          "default": "59 13 * * *",
          "description": "UTC based cron schedule to apply updates",
          "type": "string"
        },
        "SecurityOnly": {
          "default": false,
          "description": "Only apply security updates",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "placementprofile": {
      "additionalProperties": false,
      "description": "Manages where resource groups in a component are placed",
      "properties": {
        "*": {
          "additionalProperties": false,
          "properties": {
            "DeploymentFramework": {
              "description": "The deployment framework to use to generate the outputs for deployment",
              "type": "string"
            },
            "Provider": {
              "description": "The provider to use to host the component",
              "type": "string"
            },
            "Region": {
              "description": "The id of the region to host the component",
              "type": "string"
            }
          },
          "required": [
            "Provider",
            "Region",
            "DeploymentFramework"
          ],
          "type": "object"
        }
      },
      "type": "object"
    },
    "plugin": {
      "additionalProperties": false,
      "description": "Defines a CMDB plugin and how its loaded",
      "properties": {
        "Enabled": {
          "default": true,
          "description": "To enable loading the plugin",
          "type": "boolean"
        },
        "Name": {
          "description": "The id of the plugin to install",
          "type": "string"
        },
        "Priority": {
          "default": 100,
          "description": "The priority order to load plugins - lowest first",
          "type": "number"
        },
        "Required": {
          "default": false,
          "description": "Ensure the plugin loads at all times",
          "type": "boolean"
        },
        "Source": {
          "description": "Where the plugin for the plugin can be found",
          "enum": [
            "local",
            "git"
          ],
          "type": "string"
        },
        "Source:git": {
          "additionalProperties": false,
          "properties": {
            "Path": {
              "description": "a path within in the repository where the plugin starts",
              "type": "string"
            },
            "Ref": {
              "default": "main",
              "description": "The ref to clone from the repo",
              "type": "string"
            },
            "Url": {
              "description": "The Url for the git repository",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "required": [
        "Name",
        "Source"
      ],
      "type": "object"
    },
    "scalingpolicy": {
      "additionalProperties": false,
      "description": "Defines the behaviour of auto scaling resources",
      "properties": {
        "Cooldown": {
          "additionalProperties": false,
          "description": "Cooldown time ( seconds ) after a scaling event has occurred before another event can be triggered",
          "properties": {
            "ScaleIn": {
              "default": 300,
              "type": "number"
            },
            "ScaleOut": {
              "default": 600,
              "type": "number"
            }
          },
          "type": "object"
        },
        "Scheduled": {
          "additionalProperties": false,
          "properties": {
            "Enabled": {
              "default": true,
              "type": "boolean"
            },
            "ProcessorProfile": {
              "default": "default",
              "type": "string"
            },
            "Schedule": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "Stepped": {
          "additionalProperties": false,
          "properties": {
            "Adjustments": {
              "additionalProperties": false,
              "description": "The adjustments to apply at each step",
              "patternProperties": {
                "^[A-Za-z_][A-Za-z0-9_-]*$": {
                  "properties": {
                    "AdjustmentValue": {
                      "default": 1,
                      "description": "The value to apply when the adjustment step is triggered",
                      "type": "number"
                    },
                    "LowerBound": {
                      "description": "The lower bound for the difference between the alarm threshold and the metric",
                      "type": "number"
                    },
                    "UpperBound": {
                      "description": "The upper bound for the difference between the alarm threshold and the metric",
                      "type": "number"
                    }
                  }
                }
              },
              "type": "object"
            },
            "CapacityAdjustment": {
              "default": "Change",
              "description": "How to scale when the policy is triggered",
              "enum": [
                "Change",
                "Exact",
                "Percentage"
              ],
              "type": "string"
            },
            "Enabled": {
              "default": true,
              "type": "boolean"
            },
            "MetricAggregation": {
              "default": "Average",
              "description": "The method used to agregate the cloudwatch metric",
              "enum": [
                "Average",
                "Minimum",
                "Maximum"
              ],
              "type": "string"
            },
            "MinAdjustment": {
              "default": -1,
              "description": "When minimum scale adjustment value to apply when triggered",
              "type": "number"
            }
          },
          "type": "object"
        },
        "Tracked": {
          "additionalProperties": false,
          "properties": {
            "Enabled": {
              "default": true,
              "type": "boolean"
            },
            "RecommendedMetric": {
              "description": "Use a recommended (predefined) metric for scaling",
              "type": "string"
            },
            "ScaleInEnabled": {
              "default": true,
              "type": "boolean"
            },
            "TargetValue": {
              "type": "number"
            }
          },
          "type": "object"
        },
        "TrackingResource": {
          "additionalProperties": false,
          "description": "The resource metric used to trigger scaling",
          "properties": {
            "Link": {
              "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
            },
            "MetricTrigger": {
              "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/alert"
            }
          },
          "type": "object"
        },
        "Type": {
          "default": "Stepped",
          "enum": [
            "Stepped",
            "Tracked",
            "Scheduled"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "scalingpolicy_ecs": {
      "additionalProperties": false,
      "description": "ECS Specific overrides for scaling policies",
      "properties": {
        "ComputeProvider": {
          "additionalProperties": false,
          "properties": {
            "ManageTermination": {
              "default": true,
              "description": "Alow the computer provider to manage when instances will be terminated",
              "type": "boolean"
            },
            "MaxAdjustment": {
              "default": 10000,
              "description": "The maximum instances to  update during scaling activities",
              "type": "number"
            },
            "MinAdjustment": {
              "default": 1,
              "description": "The minimum instances to update during scaling activities",
              "type": "number"
            },
            "TargetCapacity": {
              "default": 90,
              "description": "The target usage of the autoscale group to maintain as a percentage",
              "type": "number"
            }
          },
          "type": "object"
        },
        "Cooldown": {
          "additionalProperties": false,
          "description": "Cooldown time ( seconds ) after a scaling event has occurred before another event can be triggered",
          "properties": {
            "ScaleIn": {
              "default": 300,
              "type": "number"
            },
            "ScaleOut": {
              "default": 600,
              "type": "number"
            }
          },
          "type": "object"
        },
        "Scheduled": {
          "additionalProperties": false,
          "properties": {
            "Enabled": {
              "default": true,
              "type": "boolean"
            },
            "ProcessorProfile": {
              "default": "default",
              "type": "string"
            },
            "Schedule": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "Stepped": {
          "additionalProperties": false,
          "properties": {
            "Adjustments": {
              "additionalProperties": false,
              "description": "The adjustments to apply at each step",
              "patternProperties": {
                "^[A-Za-z_][A-Za-z0-9_-]*$": {
                  "properties": {
                    "AdjustmentValue": {
                      "default": 1,
                      "description": "The value to apply when the adjustment step is triggered",
                      "type": "number"
                    },
                    "LowerBound": {
                      "description": "The lower bound for the difference between the alarm threshold and the metric",
                      "type": "number"
                    },
                    "UpperBound": {
                      "description": "The upper bound for the difference between the alarm threshold and the metric",
                      "type": "number"
                    }
                  }
                }
              },
              "type": "object"
            },
            "CapacityAdjustment": {
              "default": "Change",
              "description": "How to scale when the policy is triggered",
              "enum": [
                "Change",
                "Exact",
                "Percentage"
              ],
              "type": "string"
            },
            "Enabled": {
              "default": true,
              "type": "boolean"
            },
            "MetricAggregation": {
              "default": "Average",
              "description": "The method used to agregate the cloudwatch metric",
              "enum": [
                "Average",
                "Minimum",
                "Maximum"
              ],
              "type": "string"
            },
            "MinAdjustment": {
              "default": -1,
              "description": "When minimum scale adjustment value to apply when triggered",
              "type": "number"
            }
          },
          "type": "object"
        },
        "Tracked": {
          "additionalProperties": false,
          "properties": {
            "Enabled": {
              "default": true,
              "type": "boolean"
            },
            "RecommendedMetric": {
              "description": "Use a recommended (predefined) metric for scaling",
              "type": "string"
            },
            "ScaleInEnabled": {
              "default": true,
              "type": "boolean"
            },
            "TargetValue": {
              "type": "number"
            }
          },
          "type": "object"
        },
        "TrackingResource": {
          "additionalProperties": false,
          "description": "The resource metric used to trigger scaling",
          "properties": {
            "Link": {
              "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
            },
            "MetricTrigger": {
              "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/alert"
            }
          },
          "type": "object"
        },
        "Type": {
          "default": "ComputeProvider",
          "enum": [
            "Stepped",
            "Tracked",
            "Scheduled",
            "ComputeProvider"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "secretstring": {
      "additionalProperties": false,
      "description": "Defines the policy for generating secret strings",
      "properties": {
        "ExcludedCharacters": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "default": [
            "\"",
            "'",
            "$",
            "@",
            "/",
            "\\"
          ],
          "description": "Characters that must be excluded",
          "type": "array"
        },
        "IncludeLower": {
          "default": true,
          "description": "Include lower-case characters",
          "type": "boolean"
        },
        "IncludeNumber": {
          "default": true,
          "description": "Include numbers characters",
          "type": "boolean"
        },
        "IncludeSpecial": {
          "default": false,
          "description": "Include special characters",
          "type": "boolean"
        },
        "IncludeUpper": {
          "default": true,
          "description": "Include upper-case characters",
          "type": "boolean"
        },
        "MaxLength": {
          "default": 30,
          "description": "The maximum character length",
          "type": "number"
        },
        "MinLength": {
          "default": 20,
          "description": "The minimum character length",
          "type": "number"
        },
        "RequireAllIncludedTypes": {
          "default": true,
          "description": "Require at least one of each included type",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "srvregattach": {
      "additionalProperties": false,
      "description": "Attachs a component port to a service registry",
      "properties": {
        "Component": {
          "type": "string"
        },
        "Instance": {
          "type": "string"
        },
        "LinkName": {
          "default": "srvreg",
          "type": "string"
        },
        "RegistryService": {
          "type": "string"
        },
        "SubComponent": {
          "type": "string"
        },
        "Tier": {
          "type": "string"
        },
        "Type": {
          "const": "serviceregistryservice",
          "default": "serviceregistryservice",
          "type": "string"
        },
        "Version": {
          "type": "string"
        }
      },
      "required": [
        "Tier",
        "Component"
      ],
      "type": "object"
    },
    "table_hosting": {
      "additionalProperties": false,
      "description": "Hosting and capacity configuration for global db tables",
      "properties": {
        "Backup": {
          "additionalProperties": false,
          "properties": {
            "Enabled": {
              "default": false,
              "description": "Enables point in time recovery on the table",
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "Billing": {
          "default": "provisioned",
          "description": "The billing mode for the table",
          "enum": [
            "provisioned",
            "per-request"
          ],
          "type": "string"
        },
        "Capacity": {
          "additionalProperties": false,
          "properties": {
            "Read": {
              "default": 1,
              "description": "When using provisioned billing the maximum RCU of the table",
              "type": "number"
            },
            "Write": {
              "default": 1,
              "description": "When using provisioned billing the maximum WCU of the table",
              "type": "number"
            }
          },
          "type": "object"
        },
        "Encrypted": {
          "default": true,
          "description": "Enable at rest encryption",
          "type": "boolean"
        },
        "Stream": {
          "additionalProperties": false,
          "properties": {
            "Enabled": {
              "default": false,
              "description": "Enables event change streams for the table",
              "type": "boolean"
            },
            "ViewType": {
              "default": "NEW_IMAGE",
              "description": "The change notification event content",
              "enum": [
                "KEYS_ONLY",
                "NEW_IMAGE",
                "OLD_IMAGE",
                "NEW_AND_OLD_IMAGES"
              ],
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "tracing": {
      "additionalProperties": false,
      "description": "Application tracing configuration",
      "properties": {
        "Enabled": {
          "default": true,
          "type": "boolean"
        },
        "Mode": {
          "enum": [
            "active",
            "passthrough"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "volume": {
      "additionalProperties": false,
      "description": "Defines the standard configuration of a storage volume",
      "properties": {
        "Device": {
          "description": "The deivce Id of the volume where the disk will be attached",
          "type": "string"
        },
        "Enabled": {
          "default": true,
          "description": "Should the volume be created",
          "type": "boolean"
        },
        "Iops": {
          "description": "For volume types which support provisioned IOPS, this sets the requested IOPS",
          "type": "number"
        },
        "MountPath": {
          "description": "An OS path where the disk will be mounted",
          "type": "string"
        },
        "Size": {
          "description": "The size in GB of the volume",
          "type": "number"
        },
        "Type": {
          "default": "gp2",
          "description": "The type of volume to provision - see provider for available types",
          "type": "string"
        }
      },
      "required": [
        "Device",
        "Size"
      ],
      "type": "object"
    },
    "waf": {
      "additionalProperties": false,
      "description": "The Web Application Firewall Policy to apply",
      "properties": {
        "CountryGroups": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "type": "array"
        },
        "Enabled": {
          "default": true,
          "type": "boolean"
        },
        "IPAddressGroups": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "type": "array"
        },
        "Logging": {
          "additionalProperties": false,
          "properties": {
            "Enabled": {
              "default": true,
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "OWASP": {
          "default": false,
          "type": "boolean"
        },
        "Profiles": {
          "additionalProperties": false,
          "properties": {
            "Logging": {
              "default": "waf",
              "description": "Logging profile to process WAF Logs that are stored in the OpsData DataBucket.",
              "type": "string"
            }
          },
          "type": "object"
        },
        "RateLimits": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "IPAddressGroups": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "Limit": {
                  "type": "number"
                }
              },
              "required": [
                "Limit"
              ]
            }
          },
          "type": "object"
        },
        "Version": {
          "default": "v1",
          "description": "Version of WAF to use",
          "enum": [
            "v1",
            "v2"
          ],
          "type": "string"
        }
      },
      "type": "object"
    }
  }
}
