{
  "$id": "https://docs.hamlet.io/schema/latest/Blueprint-schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "definitions": {
    "Accounts": {
      "additionalProperties": false,
      "description": "The deployment provider account layer",
      "properties": {
        "Accounts": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Audit": {
                  "additionalProperties": false,
                  "description": "Manage the object store audit logging",
                  "properties": {
                    "Expiration": {
                      "description": "The duration to keep logs for",
                      "type": [
                        "number",
                        "string"
                      ]
                    },
                    "Offline": {
                      "description": "The duration to keep logs before sending to offline storage",
                      "type": [
                        "number",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "Console": {
                  "additionalProperties": false,
                  "description": "Configuration control for virtual machine consoles",
                  "properties": {
                    "Encryption": {
                      "additionalProperties": false,
                      "description": "Enable encryption of all content between the virtual machine and the console service",
                      "properties": {
                        "DedicatedKey": {
                          "default": false,
                          "description": "Use a dedicated KMS key instead of the default account kms key",
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    },
                    "LoggingDestinations": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "default": [
                        "s3"
                      ],
                      "description": "AWS: where logs from the console session will be sent",
                      "enum": [
                        "cloudwatch",
                        "s3"
                      ],
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "CostCentre": {
                  "description": "A cost centre tag to apply to all components the account belongs to",
                  "type": "string"
                },
                "DeploymentProfiles": {
                  "description": "Account specific DeploymentProfiles to apply across all account components",
                  "type": [
                    "array",
                    "boolean",
                    "number",
                    "object",
                    "string"
                  ]
                },
                "Description": {
                  "description": "A description of the account",
                  "type": "string"
                },
                "Domain": {
                  "description": "The id of a Domain Reference to use as the default",
                  "type": "string"
                },
                "Encryption": {
                  "additionalProperties": false,
                  "description": "Manage Account level encryption keys",
                  "properties": {
                    "Alias": {
                      "additionalProperties": false,
                      "description": "Control the alias of the KMS Key",
                      "properties": {
                        "IncludeSeed": {
                          "default": false,
                          "description": "Include a unique seed in the alias to ensure it is unique in the account",
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "Id": {
                  "description": "A hamlet specific unique Id for the Account",
                  "type": "string"
                },
                "Logging": {
                  "additionalProperties": false,
                  "description": "Account level resource logging configuration",
                  "properties": {
                    "Encryption": {
                      "additionalProperties": false,
                      "description": "Manage at-rest encryption of log storage",
                      "properties": {
                        "Enabled": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "Modules": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/module",
                  "description": "Modules to import and apply for any component that belongs to the account"
                },
                "Name": {
                  "description": "A hamlet specific unique name for the Account - Uses Id if not defined",
                  "type": "string"
                },
                "Operations": {
                  "additionalProperties": false,
                  "description": "Account wide control over the operations object store created within segments",
                  "properties": {
                    "Expiration": {
                      "description": "The maximum time to keep opbjects in operations stores",
                      "type": "number"
                    }
                  },
                  "type": "object"
                },
                "Plugins": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/plugin",
                  "description": "Pluings to import and apply for any component that belongs to the account"
                },
                "PolicyProfiles": {
                  "description": "Account specific PolicyProfiles to apply across all account components",
                  "type": [
                    "array",
                    "boolean",
                    "number",
                    "object",
                    "string"
                  ]
                },
                "Profiles": {
                  "additionalProperties": false,
                  "description": "Account wide profiles to apply to account and child resources",
                  "properties": {
                    "Deployment": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "description": "The id of a DeploymentProfile Reference or Account attribute to apply to all components",
                      "type": "array"
                    },
                    "Policy": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "description": "The id of a PolicyProfile Reference or Account attribute to apply to all components",
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Provider": {
                  "default": "aws",
                  "description": "The name of the provider that the account belongs to",
                  "type": "string"
                },
                "ProviderId": {
                  "description": "The unique Id of the account from the provider",
                  "type": "string"
                },
                "Region": {
                  "description": "The id of a Region Reference to use as the default",
                  "type": "string"
                },
                "Registry": {
                  "additionalProperties": false,
                  "description": "Manage the registries used to host account based copies for images",
                  "properties": {
                    "Registries": {
                      "additionalProperties": false,
                      "description": "Defines the registries available for image hosting",
                      "properties": {
                        "contentnode": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "dataset": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "docker": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "providerregistry",
                              "default": "providerregistry",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "lambda": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "lambda_jar": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "openapi": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "pipeline": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "rdssnapshot": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "snapshotstore",
                              "default": "snapshotstore",
                              "description": "How the images are stored",
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "scripts": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "spa": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        },
                        "swagger": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Storage": {
                              "const": "objectstore",
                              "default": "objectstore",
                              "description": "How the images are stored",
                              "type": [
                                "array",
                                "boolean",
                                "number",
                                "object",
                                "string"
                              ]
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "ReplicaRegions": {
                      "additionalProperties": false,
                      "description": "A list of regions to replicate registries to",
                      "properties": {
                        "ProviderIds": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "description": "The provider Ids of provider accounts to share with",
                          "type": "array"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "S3": {
                  "additionalProperties": false,
                  "description": "Account level S3/Object store configuration",
                  "properties": {
                    "Encryption": {
                      "additionalProperties": false,
                      "description": "At-rest encryption management",
                      "properties": {
                        "Enabled": {
                          "default": false,
                          "type": "boolean"
                        },
                        "Encryption": {
                          "default": false,
                          "type": "boolean"
                        },
                        "EncryptionSource": {
                          "default": "EncryptionService",
                          "description": "The encryption service to use to encrypt data",
                          "enum": [
                            "EncryptionService",
                            "aws:kms",
                            "localservice",
                            "aes256"
                          ],
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "Versioning": {
                      "additionalProperties": false,
                      "description": "Enable versioning on all account level object stores",
                      "properties": {
                        "Enabled": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "Seed": {
                  "description": "A random seed to ensure global resource names are unique",
                  "type": "string"
                },
                "Title": {
                  "description": "A long form title of the account for documentation",
                  "type": "string"
                },
                "Volume": {
                  "additionalProperties": false,
                  "description": "Account wide controls over block storage volumes",
                  "properties": {
                    "Encryption": {
                      "additionalProperties": false,
                      "description": "Manage at-rest encryption of volumes",
                      "properties": {
                        "Enabled": {
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "aws:SES": {
                  "additionalProperties": false,
                  "description": "AWS: Simple Email Service Account wide configuration",
                  "properties": {
                    "IPAccessPolicy": {
                      "default": "allow",
                      "description": "Controls how IPAddressGroups are handled - deny: deny these groups - allow: only allow these groups",
                      "enum": [
                        "allow",
                        "deny"
                      ],
                      "type": "string"
                    },
                    "IPAddressGroups": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "RuleSet": {
                      "additionalProperties": false,
                      "description": "Ruleset details. Only one active per account",
                      "properties": {
                        "Name": {
                          "default": "account-default",
                          "description": "Name of the ruleset",
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "aws:ecsAccountSettings": {
                  "default": {
                    "awsvpcTrunking": true,
                    "containerInstanceLongArnFormat": true,
                    "serviceLongArnFormat": true,
                    "taskLongArnFormat": true
                  },
                  "description": "AWS manage account level configuration of the Elastic Container Service",
                  "type": "object"
                }
              },
              "required": [
                "Seed"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "AlertProfiles": {
      "additionalProperties": false,
      "description": "A collection of alert rules applied to a component",
      "properties": {
        "AlertProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Rules": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "AlertRules": {
      "additionalProperties": false,
      "description": "A alert filtering rule to forward alerts based on their severity",
      "properties": {
        "AlertRules": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Destinations": {
                  "additionalProperties": false,
                  "properties": {
                    "Links": {
                      "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
                    }
                  },
                  "type": "object"
                },
                "Severity": {
                  "enum": [
                    "debug",
                    "info",
                    "warn",
                    "error",
                    "fatal"
                  ],
                  "type": "string"
                }
              },
              "required": [
                "Severity"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "BaselineProfiles": {
      "additionalProperties": false,
      "description": "The baseline components to use for a given baseilne function",
      "properties": {
        "BaselineProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "AppData": {
                  "type": "string"
                },
                "CDNOriginKey": {
                  "type": "string"
                },
                "Encryption": {
                  "type": "string"
                },
                "OpsData": {
                  "type": "string"
                },
                "SSHKey": {
                  "type": "string"
                }
              },
              "required": [
                "OpsData",
                "AppData",
                "Encryption",
                "SSHKey",
                "CDNOriginKey"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "BootstrapProfiles": {
      "additionalProperties": false,
      "description": "A collection of boostraps to apply",
      "properties": {
        "BootstrapProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "bastion": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "Bootstraps": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "computecluster": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "Bootstraps": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "ec2": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "Bootstraps": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "ecs": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "Bootstraps": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Bootstraps": {
      "additionalProperties": false,
      "description": "User defined initialisation for virtual machine based components",
      "properties": {
        "Bootstraps": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "AutoUpgradeOnMinorVersion": {
                  "default": false,
                  "type": "boolean"
                },
                "Index": {
                  "description": "Determines script execution sequence.",
                  "type": "number"
                },
                "InitScript": {
                  "type": "string"
                },
                "Packages": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Name": {
                          "type": "string"
                        },
                        "Version": {
                          "type": "string"
                        }
                      }
                    }
                  },
                  "type": "object"
                },
                "Prefix": {
                  "type": "string"
                },
                "ProtectedSettings": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Key": {
                          "type": "string"
                        },
                        "Value": {
                          "type": [
                            "array",
                            "boolean",
                            "number",
                            "object",
                            "string"
                          ]
                        }
                      },
                      "required": [
                        "Key",
                        "Value"
                      ]
                    }
                  },
                  "type": "object"
                },
                "Publisher": {
                  "type": "string"
                },
                "ScriptStore": {
                  "type": "string"
                },
                "Settings": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Key": {
                          "type": "string"
                        },
                        "Value": {
                          "type": [
                            "array",
                            "boolean",
                            "number",
                            "object",
                            "string"
                          ]
                        }
                      },
                      "required": [
                        "Key",
                        "Value"
                      ]
                    }
                  },
                  "type": "object"
                },
                "Type": {
                  "additionalProperties": false,
                  "properties": {
                    "HandlerVersion": {
                      "type": "string"
                    },
                    "Name": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "CORSProfiles": {
      "additionalProperties": false,
      "description": "Cross Origin Resource Sharing Policy",
      "properties": {
        "CORSProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "AllowedHeaders": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "AllowedMethods": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "AllowedOrigins": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "ExposedHeaders": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "MaxAge": {
                  "type": "number"
                }
              },
              "required": [
                "AllowedOrigins",
                "AllowedMethods",
                "AllowedHeaders",
                "ExposedHeaders",
                "MaxAge"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Categories": {
      "additionalProperties": false,
      "description": "A high level grouping of environments",
      "properties": {
        "Categories": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Description": {
                  "type": "string"
                },
                "Id": {
                  "type": "string"
                },
                "Name": {
                  "type": "string"
                },
                "Title": {
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "CertificateBehaviours": {
      "additionalProperties": false,
      "description": "How to format the hostname used in a certificate",
      "properties": {
        "CertificateBehaviours": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "External": {
                  "type": "boolean"
                },
                "HostParts": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "IncludeInHost": {
                  "additionalProperties": false,
                  "properties": {
                    "Product": {
                      "type": "boolean"
                    },
                    "Segment": {
                      "type": "boolean"
                    },
                    "Tier": {
                      "type": "boolean"
                    }
                  },
                  "type": "object"
                },
                "Wildcard": {
                  "type": "boolean"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Certificates": {
      "additionalProperties": false,
      "description": "Mapping of a domain to a product certificate entry - the Id of the reference should be a product Id",
      "properties": {
        "Certificates": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Domain": {
                  "description": "The Id of a domain reference to map to a product",
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ComputeProviders": {
      "additionalProperties": false,
      "description": "Policies to determine the compute services used to host a given resource",
      "properties": {
        "ComputeProviders": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Containers": {
                  "additionalProperties": false,
                  "description": "Compute policy for container based resources",
                  "properties": {
                    "Additional": {
                      "additionalProperties": false,
                      "description": "Providers who will meet the additional compute capacity outside of the default",
                      "patternProperties": {
                        "^[A-Za-z_][A-Za-z0-9_-]*$": {
                          "properties": {
                            "Provider": {
                              "enum": [
                                "_autoscalegroup",
                                "aws:fargate",
                                "aws:fargatespot"
                              ],
                              "type": "string"
                            },
                            "Weight": {
                              "default": 1,
                              "description": "The ratio of containers allocated to the provider based on the configured providers",
                              "type": "number"
                            }
                          },
                          "required": [
                            "Provider"
                          ]
                        }
                      },
                      "type": "object"
                    },
                    "Default": {
                      "additionalProperties": false,
                      "description": "Sets the default computer provider which will meet base capacity",
                      "properties": {
                        "Provider": {
                          "default": "_autoscalegroup",
                          "description": "The default container compute provider",
                          "enum": [
                            "_autoscalegroup",
                            "aws:fargate",
                            "aws:fargatespot"
                          ],
                          "type": "string"
                        },
                        "RequiredCount": {
                          "default": 1,
                          "description": "The minimum count of containers to run on the default provider",
                          "type": "number"
                        },
                        "Weight": {
                          "default": 1,
                          "description": "The ratio of containers allocated to the provider based on the configured providers",
                          "type": "number"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "CountryGroups": {
      "additionalProperties": false,
      "description": "A collection of Country Codes used for access control",
      "properties": {
        "CountryGroups": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Blacklist": {
                  "type": "boolean"
                },
                "Locations": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "DeploymentGroups": {
      "additionalProperties": false,
      "description": "A collection of deployment units and their relationships",
      "properties": {
        "DeploymentGroups": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "CompositeTemplate": {
                  "description": "A composite template file to include for this group",
                  "type": "string"
                },
                "DistrictType": {
                  "default": "*",
                  "description": "The DistrictType to include as part of the Deployment Group",
                  "type": "string"
                },
                "Enabled": {
                  "default": true,
                  "type": "boolean"
                },
                "Level": {
                  "description": "The deployment level to use for template generation",
                  "enum": [
                    "",
                    "account",
                    "segment",
                    "solution",
                    "application"
                  ],
                  "type": "string"
                },
                "OutputPrefix": {
                  "description": "Overrides the prefix used when generating outputs - Defaults to the Id of the Group",
                  "type": "string"
                },
                "Priority": {
                  "default": 100,
                  "description": "The priority this group has in deployment mode processing",
                  "type": "number"
                },
                "ResourceSets": {
                  "additionalProperties": false,
                  "description": "Generate deployments based on resource labels across all units in the group",
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Enabled": {
                          "default": true,
                          "type": "boolean"
                        },
                        "GroupDeploymentUnit": {
                          "default": true,
                          "description": "Does the resource set span all units in the group",
                          "type": "boolean"
                        },
                        "ResourceLabels": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "description": "The resource labels to include in the subset",
                          "type": "array"
                        },
                        "deployment:Priority": {
                          "default": 5,
                          "description": "The Deployment Priority",
                          "type": "number"
                        },
                        "deployment:Unit": {
                          "description": "The Deployment Unit",
                          "type": "string"
                        }
                      },
                      "required": [
                        "deployment:Unit"
                      ]
                    }
                  },
                  "type": "object"
                }
              },
              "required": [
                "Level"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "DeploymentModes": {
      "additionalProperties": false,
      "description": "A collection of deployment groups which are executed in a defined order",
      "properties": {
        "DeploymentModes": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Enabled": {
                  "default": true,
                  "type": "boolean"
                },
                "ExecutionPolicy": {
                  "default": "Optional",
                  "description": "Defines how groups can be used in this deployment mode",
                  "enum": [
                    "Required",
                    "Optional"
                  ],
                  "type": "string"
                },
                "Explicit": {
                  "additionalProperties": false,
                  "description": "Controls for explicit membership",
                  "properties": {
                    "Groups": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "description": "A list of group ids in their deployment order",
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Membership": {
                  "description": "How deployment groups are included in the mode and their ordering",
                  "enum": [
                    "explicit",
                    "priority",
                    "orphaned"
                  ],
                  "type": "string"
                },
                "Operations": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "default": [
                    "update"
                  ],
                  "description": "The deployment operations to complete for each deployment",
                  "enum": [
                    "create",
                    "update",
                    "delete"
                  ],
                  "type": "array"
                },
                "Priority": {
                  "additionalProperties": false,
                  "description": "Controls for priority membership",
                  "properties": {
                    "GroupFilter": {
                      "default": ".*",
                      "description": "A regex filter to apply on group ids to include in the mode",
                      "type": "string"
                    },
                    "Order": {
                      "default": "LowestFirst",
                      "description": "How to evalute the priority ordering",
                      "enum": [
                        "HighestFirst",
                        "LowestFirst"
                      ],
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              },
              "required": [
                "Membership"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "DeploymentProfiles": {
      "additionalProperties": false,
      "description": "Creates a collection of configuration which can be applied to multiple components",
      "properties": {
        "DeploymentProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Modes": {
                  "description": "A nested object with the deployment mode name as the root and childs based on component types",
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Domains": {
      "additionalProperties": false,
      "description": "Represents a segment of a domain name",
      "properties": {
        "Domains": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Bare": {
                  "default": false,
                  "description": "Use the name value of the domain as the full domain name value",
                  "type": "boolean"
                },
                "Name": {
                  "description": "The name of the domain",
                  "type": "string"
                },
                "Parents": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "description": "The parent of this domain segment",
                  "type": "array"
                },
                "Role": {
                  "enum": [
                    "primary",
                    "secondary"
                  ],
                  "type": "string"
                },
                "Stem": {
                  "description": "The root stem domain name that children will be based on",
                  "type": "string"
                },
                "Zone": {
                  "description": "The zone the endpoint belongs to",
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Environments": {
      "additionalProperties": false,
      "description": "The environment layer",
      "properties": {
        "Environments": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Category": {
                  "type": "string"
                },
                "Data": {
                  "additionalProperties": false,
                  "properties": {
                    "Expiration": {
                      "type": "number"
                    },
                    "Offline": {
                      "type": "number"
                    },
                    "Public": {
                      "additionalProperties": false,
                      "properties": {
                        "Enabled": {
                          "default": false,
                          "type": "boolean"
                        },
                        "IPAddressGroups": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "type": "array"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "Description": {
                  "type": "string"
                },
                "DomainBehaviours": {
                  "additionalProperties": false,
                  "properties": {
                    "Segment": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "FlowLogs": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": false,
                      "description": "Deprecated - here to override automatically added enabled attribute",
                      "type": "boolean"
                    },
                    "Expiration": {
                      "default": 7,
                      "type": "number"
                    }
                  },
                  "type": "object"
                },
                "Id": {
                  "type": "string"
                },
                "Name": {
                  "type": "string"
                },
                "OSPatching": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/ospatching"
                },
                "Operations": {
                  "additionalProperties": false,
                  "properties": {
                    "DeadLetterQueue": {
                      "additionalProperties": false,
                      "properties": {
                        "Enabled": {
                          "default": false,
                          "type": "boolean"
                        },
                        "MaxReceives": {
                          "default": 3,
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "Expiration": {
                      "default": 7,
                      "type": "number"
                    },
                    "FlowLogs": {
                      "additionalProperties": false,
                      "properties": {
                        "Enabled": {
                          "type": "boolean"
                        },
                        "Expiration": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "Offline": {
                      "type": "number"
                    }
                  },
                  "type": "object"
                },
                "Profiles": {
                  "additionalProperties": false,
                  "properties": {
                    "Deployment": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "Policy": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Region": {
                  "type": "string"
                },
                "Title": {
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "IPAddressGroups": {
      "additionalProperties": false,
      "description": "A collection of CIDR based IP Addresses used for access control",
      "properties": {
        "IPAddressGroups": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "CIDR": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "Description": {
                  "type": "string"
                },
                "IsOpen": {
                  "type": "boolean"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "LogFileGroups": {
      "additionalProperties": false,
      "description": "A group of log files",
      "properties": {
        "LogFileGroups": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "LogFiles": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "LogStore": {
                  "additionalProperties": false,
                  "properties": {
                    "Destination": {
                      "default": "component",
                      "description": "The type of logstore to use for this log file group - component is local and link is an external store",
                      "enum": [
                        "component",
                        "link"
                      ],
                      "type": "string"
                    },
                    "Link": {
                      "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link",
                      "description": "A link to an external log store"
                    }
                  },
                  "type": "object"
                }
              },
              "required": [
                "LogFiles"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "LogFileProfiles": {
      "additionalProperties": false,
      "description": "A collectio of log file groups based on component type",
      "properties": {
        "LogFileProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "bastion": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "LogFileGroups": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "computecluster": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "LogFileGroups": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "ec2": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "LogFileGroups": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "ecs": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "LogFileGroups": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "LogFiles": {
      "additionalProperties": false,
      "description": "A log file and its collection pattern",
      "properties": {
        "LogFiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "FilePath": {
                  "type": "string"
                },
                "MultiLinePattern": {
                  "type": "string"
                },
                "TimeFormat": {
                  "type": "string"
                }
              },
              "required": [
                "FilePath"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "LogFilters": {
      "additionalProperties": false,
      "description": "A filter to apply when searching log files",
      "properties": {
        "LogFilters": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Pattern": {
                  "type": "string"
                }
              },
              "required": [
                "Pattern"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "LoggingProfiles": {
      "additionalProperties": false,
      "description": "A profile to describe logging rules for a component",
      "properties": {
        "LoggingProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Encryption": {
                  "additionalProperties": false,
                  "description": "Mange encryption of log storage",
                  "properties": {
                    "Enabled": {
                      "default": false,
                      "description": "Enable at rest encryption",
                      "type": "boolean"
                    }
                  },
                  "type": "object"
                },
                "ForwardingRules": {
                  "additionalProperties": false,
                  "description": "Controls the forwarding of logs after they have landed in their initial logging location",
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Filter": {
                          "description": "The name of a Logfilter to apply to the forwarding rule",
                          "type": "string"
                        },
                        "Links": {
                          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link",
                          "description": "The links of components which will accept fowarded logs"
                        }
                      },
                      "required": [
                        "Filter"
                      ]
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "NetworkEndpointGroups": {
      "additionalProperties": false,
      "description": "A group of network endpoints",
      "properties": {
        "NetworkEndpointGroups": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Services": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                }
              },
              "required": [
                "Services"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "NetworkProfiles": {
      "additionalProperties": false,
      "description": "A profile to desribe network level controls",
      "properties": {
        "NetworkProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "BaseSecurityGroup": {
                  "additionalProperties": false,
                  "properties": {
                    "Links": {
                      "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link",
                      "description": "Apply network security rules based on links"
                    },
                    "Outbound": {
                      "additionalProperties": false,
                      "description": "Outbound security group rules",
                      "properties": {
                        "GlobalAllow": {
                          "default": true,
                          "description": "Allow all outbound traffic",
                          "type": "boolean"
                        },
                        "NetworkRules": {
                          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/networkrule"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "PlacementProfiles": {
      "additionalProperties": false,
      "description": "Determines where a component will be deployed to",
      "properties": {
        "PlacementProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "*": {
                  "additionalProperties": false,
                  "properties": {
                    "DeploymentFramework": {
                      "description": "The deployment framework to use to generate the outputs for deployment",
                      "type": "string"
                    },
                    "Provider": {
                      "description": "The provider to use to host the component",
                      "type": "string"
                    },
                    "Region": {
                      "description": "The id of the region to host the component",
                      "type": "string"
                    }
                  },
                  "required": [
                    "Provider",
                    "Region",
                    "DeploymentFramework"
                  ],
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "PolicyProfiles": {
      "additionalProperties": false,
      "description": "Creates a collection of configuration which can be applied to multiple components",
      "properties": {
        "PolicyProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Modes": {
                  "description": "A nested object with the deployment mode name as the root and childs based on component types",
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "PortMappings": {
      "additionalProperties": false,
      "description": "A mapping between two ports when dealing with translation or offload services",
      "properties": {
        "PortMappings": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Destination": {
                  "type": "string"
                },
                "Source": {
                  "type": "string"
                }
              },
              "required": [
                "Source",
                "Destination"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Ports": {
      "additionalProperties": false,
      "description": "An IP based network port",
      "properties": {
        "Ports": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Certificate": {
                  "default": false,
                  "type": "boolean"
                },
                "HealthCheck": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "description": "Will the health check be run",
                      "type": "boolean"
                    },
                    "HealthyThreshold": {
                      "type": [
                        "number",
                        "string"
                      ]
                    },
                    "Interval": {
                      "type": [
                        "number",
                        "string"
                      ]
                    },
                    "Path": {
                      "type": "string"
                    },
                    "Protocol": {
                      "default": "_protocol",
                      "description": "The protocol used for healthchecks. _protocol uses the ports protocol",
                      "enum": [
                        "_protocol",
                        "TCP",
                        "UDP",
                        "HTTP",
                        "HTTPS"
                      ],
                      "type": "string"
                    },
                    "SuccessCodes": {
                      "type": "string"
                    },
                    "Timeout": {
                      "type": [
                        "number",
                        "string"
                      ]
                    },
                    "UnhealthyThreshold": {
                      "type": [
                        "number",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "ICMP": {
                  "additionalProperties": false,
                  "properties": {
                    "Code": {
                      "type": "number"
                    },
                    "Type": {
                      "type": "number"
                    }
                  },
                  "type": "object"
                },
                "IPProtocol": {
                  "enum": [
                    "tcp",
                    "udp",
                    "icmp",
                    "any",
                    "all"
                  ],
                  "type": "string"
                },
                "Port": {
                  "type": "number"
                },
                "PortRange": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "From": {
                      "type": "number"
                    },
                    "To": {
                      "type": "number"
                    }
                  },
                  "type": "object"
                },
                "Protocol": {
                  "enum": [
                    "TCP",
                    "UDP",
                    "HTTP",
                    "HTTPS",
                    "SSL"
                  ],
                  "type": "string"
                }
              },
              "required": [
                "IPProtocol"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Processors": {
      "additionalProperties": false,
      "description": "Compute resources and hardware type",
      "properties": {
        "Processors": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "bastion": {
                  "additionalProperties": false,
                  "properties": {
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "cache": {
                  "additionalProperties": false,
                  "properties": {
                    "CountPerZone": {
                      "default": 1,
                      "type": "number"
                    },
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "computecluster": {
                  "additionalProperties": false,
                  "properties": {
                    "DesiredCount": {
                      "type": "number"
                    },
                    "DesiredPerZone": {
                      "type": "number"
                    },
                    "MaxCount": {
                      "type": "number"
                    },
                    "MaxPerZone": {
                      "type": "number"
                    },
                    "MinCount": {
                      "type": "number"
                    },
                    "MinPerZone": {
                      "type": "number"
                    },
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "containerhost": {
                  "additionalProperties": false,
                  "properties": {
                    "DesiredCount": {
                      "type": "number"
                    },
                    "DesiredPerZone": {
                      "type": "number"
                    },
                    "MaxCount": {
                      "type": "number"
                    },
                    "MaxPerZone": {
                      "type": "number"
                    },
                    "MinCount": {
                      "type": "number"
                    },
                    "MinPerZone": {
                      "type": "number"
                    }
                  },
                  "type": "object"
                },
                "containerservice": {
                  "additionalProperties": false,
                  "properties": {
                    "DesiredCount": {
                      "type": "number"
                    },
                    "DesiredPerZone": {
                      "type": "number"
                    },
                    "MaxCount": {
                      "type": "number"
                    },
                    "MaxPerZone": {
                      "type": "number"
                    },
                    "MinCount": {
                      "type": "number"
                    },
                    "MinPerZone": {
                      "type": "number"
                    }
                  },
                  "type": "object"
                },
                "db": {
                  "additionalProperties": false,
                  "properties": {
                    "DesiredCount": {
                      "type": "number"
                    },
                    "DesiredPerZone": {
                      "type": "number"
                    },
                    "MaxCount": {
                      "type": "number"
                    },
                    "MaxPerZone": {
                      "type": "number"
                    },
                    "MinCount": {
                      "type": "number"
                    },
                    "MinPerZone": {
                      "type": "number"
                    },
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "docdb": {
                  "additionalProperties": false,
                  "properties": {
                    "DesiredCount": {
                      "type": "number"
                    },
                    "DesiredPerZone": {
                      "type": "number"
                    },
                    "MaxCount": {
                      "type": "number"
                    },
                    "MaxPerZone": {
                      "type": "number"
                    },
                    "MinCount": {
                      "type": "number"
                    },
                    "MinPerZone": {
                      "type": "number"
                    },
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "ec2": {
                  "additionalProperties": false,
                  "properties": {
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "ecs": {
                  "additionalProperties": false,
                  "properties": {
                    "DesiredCount": {
                      "type": "number"
                    },
                    "DesiredPerZone": {
                      "type": "number"
                    },
                    "MaxCount": {
                      "type": "number"
                    },
                    "MaxPerZone": {
                      "type": "number"
                    },
                    "MinCount": {
                      "type": "number"
                    },
                    "MinPerZone": {
                      "type": "number"
                    },
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "emr": {
                  "additionalProperties": false,
                  "properties": {
                    "DesiredCorePerZone": {
                      "default": 1,
                      "type": "number"
                    },
                    "DesiredTaskPerZone": {
                      "default": 1,
                      "type": "number"
                    },
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "es": {
                  "additionalProperties": false,
                  "properties": {
                    "CountPerZone": {
                      "default": 1,
                      "type": "number"
                    },
                    "Master": {
                      "additionalProperties": false,
                      "properties": {
                        "Count": {
                          "default": 0,
                          "type": "number"
                        },
                        "Processor": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "nat": {
                  "additionalProperties": false,
                  "properties": {
                    "Processor": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "service": {
                  "additionalProperties": false,
                  "properties": {
                    "DesiredCount": {
                      "type": "number"
                    },
                    "DesiredPerZone": {
                      "type": "number"
                    },
                    "MaxCount": {
                      "type": "number"
                    },
                    "MaxPerZone": {
                      "type": "number"
                    },
                    "MinCount": {
                      "type": "number"
                    },
                    "MinPerZone": {
                      "type": "number"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Products": {
      "additionalProperties": false,
      "description": "A product layer",
      "properties": {
        "Products": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "*": {
                  "additionalProperties": false,
                  "description": "Individual deployment-unit configuration overrides. Attribute must match the DeploymentUnit value.",
                  "properties": {
                    "Region": {
                      "description": "An override of the Region for a single DeploymentUnit.",
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "Builds": {
                  "additionalProperties": false,
                  "properties": {
                    "Code": {
                      "additionalProperties": false,
                      "properties": {
                        "Environment": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "Data": {
                      "additionalProperties": false,
                      "properties": {
                        "Environment": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "CertificateBehaviours": {
                  "additionalProperties": false,
                  "properties": {
                    "Domain": {
                      "type": "string"
                    },
                    "External": {
                      "type": "boolean"
                    },
                    "Host": {
                      "type": "string"
                    },
                    "HostParts": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "IncludeInDomain": {
                      "additionalProperties": false,
                      "properties": {
                        "Environment": {
                          "type": "boolean"
                        },
                        "Product": {
                          "type": "boolean"
                        },
                        "Segment": {
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    },
                    "IncludeInHost": {
                      "additionalProperties": false,
                      "properties": {
                        "Component": {
                          "type": "boolean"
                        },
                        "Environment": {
                          "type": "boolean"
                        },
                        "Host": {
                          "type": "boolean"
                        },
                        "Instance": {
                          "type": "boolean"
                        },
                        "Product": {
                          "type": "boolean"
                        },
                        "Segment": {
                          "type": "boolean"
                        },
                        "Tier": {
                          "type": "boolean"
                        },
                        "Version": {
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    },
                    "Wildcard": {
                      "type": "boolean"
                    }
                  },
                  "type": "object"
                },
                "DeploymentProfiles": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Modes": {
                          "description": "A nested object with the deployment mode name as the root and childs based on component types",
                          "type": "object"
                        }
                      }
                    }
                  },
                  "type": "object"
                },
                "Domain": {
                  "type": "string"
                },
                "LinkRefs": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
                },
                "Modules": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/module"
                },
                "PlacementProfiles": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/placementprofile"
                },
                "Plugins": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/plugin"
                },
                "PolicyProfiles": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Modes": {
                          "description": "A nested object with the deployment mode name as the root and childs based on component types",
                          "type": "object"
                        }
                      }
                    }
                  },
                  "type": "object"
                },
                "Profiles": {
                  "additionalProperties": false,
                  "properties": {
                    "Deployment": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "Placement": {
                      "type": "string"
                    },
                    "Policy": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Region": {
                  "type": "string"
                },
                "SES": {
                  "additionalProperties": false,
                  "properties": {
                    "Region": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Regions": {
      "additionalProperties": false,
      "description": "A physical location for infrastructure deployment",
      "properties": {
        "Regions": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "AMIs": {
                  "type": "object"
                },
                "Accounts": {
                  "type": "object"
                },
                "Description": {
                  "type": "string"
                },
                "Id": {
                  "type": "string"
                },
                "Locality": {
                  "type": "string"
                },
                "Name": {
                  "type": "string"
                },
                "Partition": {
                  "type": "string"
                },
                "Title": {
                  "type": "string"
                },
                "Zones": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "AWSZone": {
                          "type": "string"
                        },
                        "Description": {
                          "type": "string"
                        },
                        "NetworkEndpoints": {
                          "contains": {
                            "type": [
                              "object"
                            ]
                          },
                          "type": "array"
                        }
                      }
                    }
                  },
                  "type": "object"
                }
              },
              "required": [
                "Locality"
              ]
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ScriptStores": {
      "additionalProperties": false,
      "description": "A physical location for infrastructure deployment",
      "properties": {
        "ScriptStores": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Destination": {
                  "additionalProperties": false,
                  "properties": {
                    "Prefix": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "Engine": {
                  "enum": [
                    "local",
                    "github"
                  ],
                  "type": "string"
                },
                "Source": {
                  "additionalProperties": false,
                  "properties": {
                    "Branch": {
                      "type": "string"
                    },
                    "Directory": {
                      "type": "string"
                    },
                    "Repository": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "SecurityProfiles": {
      "additionalProperties": false,
      "description": "Security Configuration Options",
      "properties": {
        "SecurityProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "IPSecVPN": {
                  "additionalProperties": false,
                  "properties": {
                    "DeadPeerDetectionAction": {
                      "enum": [
                        "clear",
                        "none",
                        "restart"
                      ],
                      "type": "string"
                    },
                    "DeadPeerDetectionTimeout": {
                      "type": "number"
                    },
                    "IKEVersions": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "Phase1": {
                      "additionalProperties": false,
                      "properties": {
                        "DiffeHellmanGroups": {
                          "contains": {
                            "type": [
                              "number"
                            ]
                          },
                          "type": "array"
                        },
                        "EncryptionAlgorithms": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "type": "array"
                        },
                        "IntegrityAlgorithms": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "type": "array"
                        },
                        "Lifetime": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "Phase2": {
                      "additionalProperties": false,
                      "properties": {
                        "DiffeHellmanGroups": {
                          "contains": {
                            "type": [
                              "number"
                            ]
                          },
                          "type": "array"
                        },
                        "EncryptionAlgorithms": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "type": "array"
                        },
                        "IntegrityAlgorithms": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "type": "array"
                        },
                        "Lifetime": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "Rekey": {
                      "additionalProperties": false,
                      "properties": {
                        "FuzzPercentage": {
                          "type": "number"
                        },
                        "MarginTime": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "ReplayWindowSize": {
                      "type": "number"
                    },
                    "StartupAction": {
                      "description": "Initiation behaviour for vpn",
                      "enum": [
                        "add",
                        "start"
                      ],
                      "type": "string"
                    },
                    "TunnelInsideCidr": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "apigateway": {
                  "additionalProperties": false,
                  "properties": {
                    "CDNHTTPSProfile": {
                      "type": "string"
                    },
                    "GatewayHTTPSProfile": {
                      "default": "TLS_1_0",
                      "type": "string"
                    },
                    "ProtocolPolicy": {
                      "type": "string"
                    },
                    "WAFProfile": {
                      "type": "string"
                    },
                    "WAFValueSet": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "cdn": {
                  "additionalProperties": false,
                  "properties": {
                    "HTTPSProfile": {
                      "type": "string"
                    },
                    "WAFProfile": {
                      "type": "string"
                    },
                    "WAFValueSet": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "db": {
                  "additionalProperties": false,
                  "properties": {
                    "SSLCertificateAuthority": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "es": {
                  "additionalProperties": false,
                  "properties": {
                    "ProtocolPolicy": {
                      "enum": [
                        "https-only",
                        "http-https",
                        "http-only"
                      ],
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "filetransfer": {
                  "additionalProperties": false,
                  "properties": {
                    "EncryptionPolicy": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "lb": {
                  "additionalProperties": false,
                  "properties": {
                    "application": {
                      "additionalProperties": false,
                      "properties": {
                        "HTTPSProfile": {
                          "type": "string"
                        },
                        "WAFProfile": {
                          "type": "string"
                        },
                        "WAFValueSet": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "classic": {
                      "additionalProperties": false,
                      "properties": {
                        "HTTPSProfile": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "network": {
                      "additionalProperties": false,
                      "properties": {
                        "HTTPSProfile": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Segments": {
      "additionalProperties": false,
      "description": "A segment layer",
      "properties": {
        "Segments": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Bastion": {
                  "additionalProperties": false,
                  "properties": {
                    "Active": {
                      "default": false,
                      "type": "boolean"
                    },
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "IPAddressGroups": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Category": {
                  "type": "string"
                },
                "Data": {
                  "additionalProperties": false,
                  "properties": {
                    "Expiration": {
                      "type": [
                        "number",
                        "string"
                      ]
                    },
                    "Offline": {
                      "type": [
                        "number",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "Description": {
                  "type": "string"
                },
                "IPAddressGroups": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                },
                "Id": {
                  "type": "string"
                },
                "Modules": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/module"
                },
                "Name": {
                  "type": "string"
                },
                "Network": {
                  "additionalProperties": false,
                  "properties": {
                    "CIDR": {
                      "additionalProperties": false,
                      "properties": {
                        "Address": {
                          "type": "string"
                        },
                        "Enabled": {
                          "default": true,
                          "type": "boolean"
                        },
                        "Mask": {
                          "default": 0,
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "DNSHostnames": {
                      "type": "boolean"
                    },
                    "DNSSupport": {
                      "type": "boolean"
                    },
                    "InternetAccess": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Tiers": {
                      "additionalProperties": false,
                      "properties": {
                        "Order": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "type": "array"
                        }
                      },
                      "type": "object"
                    },
                    "Zones": {
                      "additionalProperties": false,
                      "properties": {
                        "Order": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "type": "array"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "Operations": {
                  "additionalProperties": false,
                  "properties": {
                    "Expiration": {
                      "type": [
                        "number",
                        "string"
                      ]
                    },
                    "FlowLogs": {
                      "additionalProperties": false,
                      "properties": {
                        "Enabled": {
                          "default": false,
                          "description": "Deprecated - here to override automatically added enabled attribute",
                          "type": "boolean"
                        },
                        "Expiration": {
                          "type": [
                            "number",
                            "string"
                          ]
                        }
                      },
                      "type": "object"
                    },
                    "Offline": {
                      "type": [
                        "number",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "Plugins": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/plugin"
                },
                "Profiles": {
                  "additionalProperties": false,
                  "properties": {
                    "Deployment": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "Policy": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Region": {
                  "type": "string"
                },
                "RotateKeys": {
                  "default": true,
                  "type": "boolean"
                },
                "S3": {
                  "additionalProperties": false,
                  "properties": {
                    "IncludeTenant": {
                      "default": false,
                      "type": "boolean"
                    }
                  },
                  "type": "object"
                },
                "Tiers": {
                  "additionalProperties": false,
                  "properties": {
                    "Order": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Title": {
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ServiceRoles": {
      "additionalProperties": false,
      "description": "Security Roles assigned to cloud services",
      "properties": {
        "ServiceRoles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Description": {
                  "description": "A description to include as part of the Role",
                  "type": "string"
                },
                "Enabled": {
                  "default": true,
                  "type": "boolean"
                },
                "ServiceName": {
                  "description": "The Service domain name for the service you want to create the role for",
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "SkuProfiles": {
      "additionalProperties": false,
      "description": "Compute SKU model and hardware type.",
      "properties": {
        "SkuProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "apigateway": {
                  "additionalProperties": false,
                  "properties": {
                    "Capacity": {
                      "type": "number"
                    },
                    "Name": {
                      "enum": [
                        "Developer",
                        "Standard",
                        "Premium",
                        "Basic",
                        "Consumption"
                      ],
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "bastion": {
                  "additionalProperties": false,
                  "properties": {
                    "Capacity": {
                      "type": "number"
                    },
                    "Name": {
                      "type": "string"
                    },
                    "Tier": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "computecluster": {
                  "additionalProperties": false,
                  "properties": {
                    "Capacity": {
                      "default": 1,
                      "type": "number"
                    },
                    "Name": {
                      "type": "string"
                    },
                    "Tier": {
                      "enum": [
                        "Standard",
                        "Basic"
                      ],
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "containerhost": {
                  "additionalProperties": false,
                  "properties": {
                    "Capacity": {
                      "type": "number"
                    },
                    "Family": {
                      "type": "string"
                    },
                    "Name": {
                      "type": "string"
                    },
                    "Size": {
                      "type": [
                        "number",
                        "string"
                      ]
                    },
                    "Tier": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "db": {
                  "additionalProperties": false,
                  "properties": {
                    "Capacity": {
                      "type": "number"
                    },
                    "Family": {
                      "type": "string"
                    },
                    "Name": {
                      "type": "string"
                    },
                    "Size": {
                      "type": [
                        "number",
                        "string"
                      ]
                    },
                    "Tier": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "directory": {
                  "additionalProperties": false,
                  "properties": {
                    "Name": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "gateway": {
                  "additionalProperties": false,
                  "properties": {
                    "Generation": {
                      "description": "The Virtual Network Gateway Generation",
                      "type": "string"
                    },
                    "Name": {
                      "type": "string"
                    },
                    "Tier": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "lb": {
                  "additionalProperties": false,
                  "properties": {
                    "Capacity": {
                      "type": "number"
                    },
                    "Name": {
                      "type": "string"
                    },
                    "Tier": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "network": {
                  "additionalProperties": false,
                  "properties": {
                    "Name": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "s3": {
                  "additionalProperties": false,
                  "properties": {
                    "Kind": {
                      "type": "string"
                    },
                    "Replication": {
                      "type": "string"
                    },
                    "Tier": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "secretstore": {
                  "additionalProperties": false,
                  "properties": {
                    "Family": {
                      "type": "string"
                    },
                    "Name": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Solution": {
      "additionalProperties": false,
      "description": "",
      "properties": {
        "Solutions": {
          "additionalProperties": false,
          "description": "Defines the components that belong to a district",
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "District": {
                  "additionalProperties": false,
                  "properties": {
                    "Layers": {
                      "additionalProperties": false,
                      "description": "The layers to match in a given district",
                      "patternProperties": {
                        "^[A-Za-z_][A-Za-z0-9_-]*$": {
                          "properties": {
                            "Id": {
                              "default": "*",
                              "description": "The Id of a layer the solution applies to - * applies to all layers that match the type",
                              "type": "string"
                            },
                            "Type": {
                              "description": "The type of layer the solution applies to",
                              "type": "string"
                            }
                          },
                          "required": [
                            "Type"
                          ]
                        }
                      },
                      "type": "object"
                    },
                    "Type": {
                      "default": "segment",
                      "description": "The type of district the solution applies to",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "Priority": {
                  "default": 100,
                  "description": "The priority order for the inclusion of this solution - Lowest = last loaded",
                  "type": "number"
                },
                "Tiers": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Active": {
                          "default": false,
                          "description": "Defines if the layer should be used. Automatically true if components are defined",
                          "type": "boolean"
                        },
                        "Components": {
                          "type": [
                            "array",
                            "boolean",
                            "number",
                            "object",
                            "string"
                          ]
                        },
                        "Index": {
                          "description": "A unique index number used when ordering tiers",
                          "type": "number"
                        },
                        "Network": {
                          "additionalProperties": false,
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "type": "boolean"
                            },
                            "Link": {
                              "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
                            },
                            "NetworkACL": {
                              "type": "string"
                            },
                            "RouteTable": {
                              "type": "string"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "required": [
                        "Index"
                      ]
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Storage": {
      "additionalProperties": false,
      "description": "Storage configuration for components",
      "properties": {
        "Storage": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "bastion": {
                  "additionalProperties": false,
                  "properties": {
                    "Volumes": {
                      "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/volume"
                    }
                  },
                  "type": "object"
                },
                "computecluster": {
                  "additionalProperties": false,
                  "properties": {
                    "Replication": {
                      "description": "The type of storage replication to use",
                      "type": "string"
                    },
                    "Tier": {
                      "description": "The storage tier to use for all volumes",
                      "type": "string"
                    },
                    "Volumes": {
                      "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/volume"
                    }
                  },
                  "type": "object"
                },
                "ec2": {
                  "additionalProperties": false,
                  "properties": {
                    "Volumes": {
                      "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/volume"
                    }
                  },
                  "type": "object"
                },
                "ecs": {
                  "additionalProperties": false,
                  "properties": {
                    "Volumes": {
                      "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/volume"
                    }
                  },
                  "type": "object"
                },
                "es": {
                  "additionalProperties": false,
                  "properties": {
                    "Volumes": {
                      "additionalProperties": false,
                      "properties": {
                        "data": {
                          "additionalProperties": false,
                          "description": "A fixed volume to use for ES Data storage",
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "description": "Should the volume be created",
                              "type": "boolean"
                            },
                            "Iops": {
                              "description": "For volume types which support provisioned IOPS, this sets the requested IOPS",
                              "type": "number"
                            },
                            "Size": {
                              "description": "The size in GB of the volume",
                              "type": "number"
                            },
                            "Type": {
                              "default": "gp2",
                              "description": "The type of volume to provision - see provider for available types",
                              "type": "string"
                            }
                          },
                          "required": [
                            "Size"
                          ],
                          "type": "object"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "storageAccount": {
                  "additionalProperties": false,
                  "description": "Azure Storage Account configuration",
                  "properties": {
                    "AccessTier": {
                      "type": "string"
                    },
                    "HnsEnabled": {
                      "type": "boolean"
                    },
                    "Replication": {
                      "type": "string"
                    },
                    "Tier": {
                      "type": "string"
                    },
                    "Type": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Tenants": {
      "additionalProperties": false,
      "description": "A tenant layer",
      "properties": {
        "Tenants": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "CertificateBehaviours": {
                  "additionalProperties": false,
                  "properties": {
                    "Domain": {
                      "type": "string"
                    },
                    "External": {
                      "type": "boolean"
                    },
                    "Host": {
                      "type": "string"
                    },
                    "HostParts": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "IncludeInDomain": {
                      "additionalProperties": false,
                      "properties": {
                        "Environment": {
                          "type": "boolean"
                        },
                        "Product": {
                          "type": "boolean"
                        },
                        "Segment": {
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    },
                    "IncludeInHost": {
                      "additionalProperties": false,
                      "properties": {
                        "Component": {
                          "type": "boolean"
                        },
                        "Environment": {
                          "type": "boolean"
                        },
                        "Host": {
                          "type": "boolean"
                        },
                        "Instance": {
                          "type": "boolean"
                        },
                        "Product": {
                          "type": "boolean"
                        },
                        "Segment": {
                          "type": "boolean"
                        },
                        "Tier": {
                          "type": "boolean"
                        },
                        "Version": {
                          "type": "boolean"
                        }
                      },
                      "type": "object"
                    },
                    "Wildcard": {
                      "type": "boolean"
                    }
                  },
                  "type": "object"
                },
                "DeploymentProfiles": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Modes": {
                          "description": "A nested object with the deployment mode name as the root and childs based on component types",
                          "type": "object"
                        }
                      }
                    }
                  },
                  "type": "object"
                },
                "Description": {
                  "type": "string"
                },
                "Id": {
                  "type": "string"
                },
                "LinkRefs": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
                },
                "Modules": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/module"
                },
                "Name": {
                  "type": "string"
                },
                "PlacementProfiles": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/placementprofile"
                },
                "Plugins": {
                  "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/plugin"
                },
                "PolicyProfiles": {
                  "additionalProperties": false,
                  "patternProperties": {
                    "^[A-Za-z_][A-Za-z0-9_-]*$": {
                      "properties": {
                        "Modes": {
                          "description": "A nested object with the deployment mode name as the root and childs based on component types",
                          "type": "object"
                        }
                      }
                    }
                  },
                  "type": "object"
                },
                "Profiles": {
                  "additionalProperties": false,
                  "properties": {
                    "Deployment": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "Placement": {
                      "type": "string"
                    },
                    "Policy": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Region": {
                  "type": "string"
                },
                "Title": {
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "TestCases": {
      "additionalProperties": false,
      "description": "An output test case",
      "properties": {
        "TestCases": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "OutputSuffix": {
                  "enum": [
                    "contract.json",
                    "template.json",
                    "config.json",
                    "cli.json",
                    "parameters.json",
                    "prologue.sh",
                    "epilogue.sh"
                  ],
                  "type": "string"
                },
                "Structural": {
                  "additionalProperties": false,
                  "properties": {
                    "CFN": {
                      "additionalProperties": false,
                      "description": "Cloud formation Template structure",
                      "properties": {
                        "Output": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "description": "Does an output with exist",
                          "type": "array"
                        },
                        "Resource": {
                          "additionalProperties": false,
                          "description": "Does a resource with the type exist",
                          "patternProperties": {
                            "^[A-Za-z_][A-Za-z0-9_-]*$": {
                              "properties": {
                                "Name": {
                                  "type": "string"
                                },
                                "Type": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "Name",
                                "Type"
                              ]
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "JSON": {
                      "additionalProperties": false,
                      "description": "Generic JSON level structure tests",
                      "properties": {
                        "Exists": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "description": "Does a JSON path exist",
                          "type": "array"
                        },
                        "Length": {
                          "additionalProperties": false,
                          "description": "Length of an Array at a given JSON path",
                          "patternProperties": {
                            "^[A-Za-z_][A-Za-z0-9_-]*$": {
                              "properties": {
                                "Count": {
                                  "type": "number"
                                },
                                "Path": {
                                  "type": "string"
                                }
                              }
                            }
                          },
                          "type": "object"
                        },
                        "Match": {
                          "additionalProperties": false,
                          "description": "Does a JSON path match a value",
                          "patternProperties": {
                            "^[A-Za-z_][A-Za-z0-9_-]*$": {
                              "properties": {
                                "Path": {
                                  "type": "string"
                                },
                                "Value": {
                                  "type": [
                                    "array",
                                    "boolean",
                                    "number",
                                    "object",
                                    "string"
                                  ]
                                }
                              }
                            }
                          },
                          "type": "object"
                        },
                        "NotEmpty": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "description": "Is the value of a JSON path not emtpy",
                          "type": "array"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                },
                "Tools": {
                  "additionalProperties": false,
                  "description": "Tool based tests - linters etc",
                  "properties": {
                    "cfn-lint": {
                      "additionalProperties": false,
                      "description": "Run cfn-lint on the file - https://github.com/aws-cloudformation/cfn-lint",
                      "properties": {
                        "Enabled": {
                          "default": true,
                          "type": "boolean"
                        },
                        "IgnoreChecks": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "description": "A list of checks to ignore in cfn-lint",
                          "type": "array"
                        }
                      },
                      "type": "object"
                    },
                    "checkov": {
                      "additionalProperties": false,
                      "description": "Run checkov on the file - https://github.com/bridgecrewio/checkov",
                      "properties": {
                        "Enabled": {
                          "default": true,
                          "type": "boolean"
                        },
                        "Framework": {
                          "default": "cloudformation",
                          "description": "The framework of the file to run testing against",
                          "enum": [
                            "cloudformation",
                            "arm"
                          ],
                          "type": [
                            "array",
                            "boolean",
                            "number",
                            "object",
                            "string"
                          ]
                        },
                        "SkipChecks": {
                          "contains": {
                            "type": [
                              "string"
                            ]
                          },
                          "description": "A list of checks to skip in checkov",
                          "type": "array"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "TestProfiles": {
      "additionalProperties": false,
      "description": "A collection of test cases",
      "properties": {
        "TestProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "*": {
                  "additionalProperties": false,
                  "description": "The component type the profile applies to",
                  "properties": {
                    "TestCases": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "VMImageProfiles": {
      "additionalProperties": false,
      "description": "A virtual machine operating system configuration",
      "properties": {
        "VMImageProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "*": {
                  "additionalProperties": false,
                  "description": "The component type that the VMImage configuration belongs to.",
                  "properties": {
                    "Image": {
                      "type": "string"
                    },
                    "LicenseType": {
                      "type": "string"
                    },
                    "Offering": {
                      "type": "string"
                    },
                    "Publisher": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "Publisher",
                    "Offering",
                    "Image"
                  ],
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "WAFConditions": {
      "additionalProperties": false,
      "description": "Web Application Firewall Condition",
      "properties": {
        "WAFConditions": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Filters": {
                  "additionalProperties": false,
                  "properties": {
                    "Constraints": {
                      "enum": [
                        "CONTAINS",
                        "CONTAINS_WORD",
                        "EXACTLY",
                        "STARTS_WITH",
                        "ENDS_WITH"
                      ],
                      "type": "string"
                    },
                    "FieldsToMatch": {
                      "additionalProperties": false,
                      "properties": {
                        "Data": {
                          "type": "string"
                        },
                        "Type": {
                          "enum": [
                            "HEADER",
                            "METHOD",
                            "QUERY_STRING",
                            "URI",
                            "BODY",
                            "SINGLE_QUERY_ARG",
                            "ALL_QUERY_ARGS"
                          ],
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "Operators": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "enum": [
                        "EQ",
                        "NE",
                        "LE",
                        "LT",
                        "GE",
                        "GT"
                      ],
                      "type": "array"
                    },
                    "Sizes": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "Targets": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "type": "array"
                    },
                    "Transformations": {
                      "contains": {
                        "type": [
                          "string"
                        ]
                      },
                      "enum": [
                        "NONE",
                        "CMD_LINE",
                        "COMPRESS_WHITE_SPACE",
                        "HTML_ENTITY_DECODE",
                        "LOWERCASE",
                        "URL_DECODE"
                      ],
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "Type": {
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "WAFProfiles": {
      "additionalProperties": false,
      "description": "Web Application Firewall Profile",
      "properties": {
        "WAFProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "DefaultAction": {
                  "enum": [
                    "ALLOW",
                    "BLOCK"
                  ],
                  "type": "string"
                },
                "Rules": {
                  "contains": {
                    "type": [
                      "object"
                    ]
                  },
                  "type": "array"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "WAFRuleGroups": {
      "additionalProperties": false,
      "description": "Web Application Firewall Rule",
      "properties": {
        "WAFRuleGroups": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "WAFRules": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "WAFRules": {
      "additionalProperties": false,
      "description": "Web Application Firewall Rule",
      "properties": {
        "WAFRules": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Conditions": {
                  "additionalProperties": false,
                  "properties": {
                    "Condition": {
                      "type": "string"
                    },
                    "Negated": {
                      "type": "boolean"
                    }
                  },
                  "type": "object"
                },
                "NameSuffix": {
                  "type": "string"
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "WAFValueSets": {
      "additionalProperties": false,
      "description": "Web Application Firewall Rule",
      "properties": {
        "WAFValueSets": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "*": {
                  "type": [
                    "array",
                    "boolean",
                    "number",
                    "object",
                    "string"
                  ]
                }
              }
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    }
  }
}
