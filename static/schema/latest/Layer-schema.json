{
  "$id": "https://docs.hamlet.io/schema/latest/Layer-schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "definitions": {
    "Account": {
      "additionalProperties": false,
      "description": "The deployment provider account layer",
      "properties": {
        "Audit": {
          "additionalProperties": false,
          "description": "Manage the object store audit logging",
          "properties": {
            "Expiration": {
              "description": "The duration to keep logs for",
              "type": [
                "number",
                "string"
              ]
            },
            "Offline": {
              "description": "The duration to keep logs before sending to offline storage",
              "type": [
                "number",
                "string"
              ]
            },
            "ReplicationRules": {
              "additionalProperties": false,
              "description": "Manage replication of the audit bucket to another location",
              "patternProperties": {
                "^[A-Za-z_][A-Za-z0-9_-]*$": {
                  "properties": {
                    "Destination": {
                      "additionalProperties": false,
                      "properties": {
                        "Id": {
                          "description": "The unique Id of the destination that will receive the data",
                          "type": "string"
                        },
                        "ProviderId": {
                          "default": "__local__",
                          "description": "The Cloud Provider Id of where the destination is hosted - set to __local__ for own account",
                          "type": "string"
                        }
                      },
                      "required": [
                        "Id"
                      ],
                      "type": "object"
                    },
                    "Enabled": {
                      "default": true,
                      "description": "Is the rule enabled",
                      "type": "boolean"
                    },
                    "Filters": {
                      "additionalProperties": false,
                      "description": "The filters to apply on objects that should be replicated",
                      "patternProperties": {
                        "^[A-Za-z_][A-Za-z0-9_-]*$": {
                          "properties": {
                            "Enabled": {
                              "default": true,
                              "description": "Is the filter enabled",
                              "type": "boolean"
                            },
                            "Type": {
                              "description": "The type of prefix to use",
                              "enum": [
                                "Prefix",
                                "Tag"
                              ],
                              "type": "string"
                            },
                            "Type:Prefix": {
                              "additionalProperties": false,
                              "description": "Prefix specific controls applied on the filter",
                              "properties": {
                                "Prefix": {
                                  "description": "The prefix to filter objects based on",
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            },
                            "Type:Tag": {
                              "additionalProperties": false,
                              "properties": {
                                "Key": {
                                  "description": "The key of the Tag",
                                  "type": "string"
                                },
                                "Value": {
                                  "description": "The vlaue of the Tag",
                                  "type": "string"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "required": [
                            "Type"
                          ]
                        }
                      },
                      "type": "object"
                    },
                    "Priority": {
                      "default": 100,
                      "description": "The priority of the rule when handling conflicts",
                      "type": "number"
                    }
                  }
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "Console": {
          "additionalProperties": false,
          "description": "Configuration control for virtual machine consoles",
          "properties": {
            "Encryption": {
              "additionalProperties": false,
              "description": "Enable encryption of all content between the virtual machine and the console service",
              "properties": {
                "DedicatedKey": {
                  "default": false,
                  "description": "Use a dedicated KMS key instead of the default account kms key",
                  "type": "boolean"
                }
              },
              "type": "object"
            },
            "LoggingDestinations": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "default": [
                "s3"
              ],
              "description": "AWS: where logs from the console session will be sent",
              "enum": [
                "cloudwatch",
                "s3"
              ],
              "type": "array"
            }
          },
          "type": "object"
        },
        "CostCentre": {
          "description": "A cost centre tag to apply to all components the account belongs to",
          "type": "string"
        },
        "DeploymentProfiles": {
          "description": "Account specific DeploymentProfiles to apply across all account components",
          "type": [
            "array",
            "boolean",
            "number",
            "object",
            "string"
          ]
        },
        "Description": {
          "description": "A description of the account",
          "type": "string"
        },
        "Domain": {
          "description": "The id of a Domain Reference to use as the default",
          "type": "string"
        },
        "Encryption": {
          "additionalProperties": false,
          "description": "Manage Account level encryption keys",
          "properties": {
            "Alias": {
              "additionalProperties": false,
              "description": "Control the alias of the KMS Key",
              "properties": {
                "IncludeSeed": {
                  "default": false,
                  "description": "Include a unique seed in the alias to ensure it is unique in the account",
                  "type": "boolean"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "Id": {
          "description": "A hamlet specific unique Id for the Account",
          "type": "string"
        },
        "Logging": {
          "additionalProperties": false,
          "description": "Account level resource logging configuration",
          "properties": {
            "Encryption": {
              "additionalProperties": false,
              "description": "Manage at-rest encryption of log storage",
              "properties": {
                "Enabled": {
                  "default": false,
                  "type": "boolean"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "Modules": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/module",
          "description": "Modules to import and apply for any component that belongs to the account"
        },
        "Name": {
          "description": "A hamlet specific unique name for the Account - Uses Id if not defined",
          "type": "string"
        },
        "Operations": {
          "additionalProperties": false,
          "description": "Account wide control over the operations object store created within segments",
          "properties": {
            "Expiration": {
              "description": "The maximum time to keep opbjects in operations stores",
              "type": "number"
            }
          },
          "type": "object"
        },
        "Plugins": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/plugin",
          "description": "Pluings to import and apply for any component that belongs to the account"
        },
        "PolicyProfiles": {
          "description": "Account specific PolicyProfiles to apply across all account components",
          "type": [
            "array",
            "boolean",
            "number",
            "object",
            "string"
          ]
        },
        "Profiles": {
          "additionalProperties": false,
          "description": "Account wide profiles to apply to account and child resources",
          "properties": {
            "Deployment": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "description": "The id of a DeploymentProfile Reference or Account attribute to apply to all components",
              "type": "array"
            },
            "Policy": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "description": "The id of a PolicyProfile Reference or Account attribute to apply to all components",
              "type": "array"
            }
          },
          "type": "object"
        },
        "Provider": {
          "default": "aws",
          "description": "The name of the provider that the account belongs to",
          "type": "string"
        },
        "ProviderAuditing": {
          "additionalProperties": false,
          "description": "Logging of cloud service provider actions",
          "properties": {
            "Enabled": {
              "default": true,
              "description": "Is the logging service enabled",
              "type": "boolean"
            },
            "Encryption": {
              "additionalProperties": false,
              "description": "Manage at-rest encryption of data storage",
              "properties": {
                "Enabled": {
                  "default": true,
                  "type": "boolean"
                }
              },
              "type": "object"
            },
            "Scope": {
              "default": "Account",
              "description": "The Scope of the logging sent to this account - Account = this account, Tenancy = all accounts in tenancy",
              "enum": [
                "Account",
                "Tenancy"
              ],
              "type": "string"
            },
            "StorageLocations": {
              "additionalProperties": false,
              "description": "Where to store the audit logs",
              "patternProperties": {
                "^[A-Za-z_][A-Za-z0-9_-]*$": {
                  "properties": {
                    "Type": {
                      "default": "Object",
                      "description": "The type of storage to use",
                      "enum": [
                        "Object",
                        "Logs"
                      ],
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    },
                    "Type:Object": {
                      "additionalProperties": false,
                      "properties": {
                        "Prefix": {
                          "default": "_provider",
                          "description": "A prefix to apply to objects store in logs - _provider = use the providers service name",
                          "type": [
                            "array",
                            "boolean",
                            "number",
                            "object",
                            "string"
                          ]
                        }
                      },
                      "type": "object"
                    }
                  }
                }
              },
              "type": "object"
            },
            "aws:InsightReporting": {
              "default": true,
              "description": "Enable proactive insight monitor logging",
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "ProviderId": {
          "description": "The unique Id of the account from the provider",
          "type": "string"
        },
        "Region": {
          "description": "The id of a Region Reference to use as the default",
          "type": "string"
        },
        "Registry": {
          "additionalProperties": false,
          "description": "Manage the registries used to host account based copies for images",
          "properties": {
            "Registries": {
              "additionalProperties": false,
              "description": "Defines the registries available for image hosting",
              "properties": {
                "contentnode": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "objectstore",
                      "default": "objectstore",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "dataset": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "objectstore",
                      "default": "objectstore",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "docker": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "providerregistry",
                      "default": "providerregistry",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "lambda": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "objectstore",
                      "default": "objectstore",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "lambda_jar": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "objectstore",
                      "default": "objectstore",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "openapi": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "objectstore",
                      "default": "objectstore",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "rdssnapshot": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "snapshotstore",
                      "default": "snapshotstore",
                      "description": "How the images are stored",
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "scripts": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "objectstore",
                      "default": "objectstore",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "spa": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "objectstore",
                      "default": "objectstore",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                },
                "swagger": {
                  "additionalProperties": false,
                  "properties": {
                    "Enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "Storage": {
                      "const": "objectstore",
                      "default": "objectstore",
                      "description": "How the images are stored",
                      "type": [
                        "array",
                        "boolean",
                        "number",
                        "object",
                        "string"
                      ]
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "ReplicaRegions": {
              "additionalProperties": false,
              "description": "A list of regions to replicate registries to",
              "properties": {
                "ProviderIds": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "description": "The provider Ids of provider accounts to share with",
                  "type": "array"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "S3": {
          "additionalProperties": false,
          "description": "Account level S3/Object store configuration",
          "properties": {
            "Encryption": {
              "additionalProperties": false,
              "description": "At-rest encryption management",
              "properties": {
                "Enabled": {
                  "default": false,
                  "type": "boolean"
                },
                "Encryption": {
                  "default": false,
                  "type": "boolean"
                },
                "EncryptionSource": {
                  "default": "EncryptionService",
                  "description": "The encryption service to use to encrypt data",
                  "enum": [
                    "EncryptionService",
                    "aws:kms",
                    "localservice",
                    "aes256"
                  ],
                  "type": "string"
                }
              },
              "type": "object"
            },
            "Versioning": {
              "additionalProperties": false,
              "description": "Enable versioning on all account level object stores",
              "properties": {
                "Enabled": {
                  "default": false,
                  "type": "boolean"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "Seed": {
          "description": "A random seed to ensure global resource names are unique",
          "type": "string"
        },
        "Title": {
          "description": "A long form title of the account for documentation",
          "type": "string"
        },
        "Volume": {
          "additionalProperties": false,
          "description": "Account wide controls over block storage volumes",
          "properties": {
            "Encryption": {
              "additionalProperties": false,
              "description": "Manage at-rest encryption of volumes",
              "properties": {
                "Enabled": {
                  "default": false,
                  "type": "boolean"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "aws:SES": {
          "additionalProperties": false,
          "description": "AWS: Simple Email Service Account wide configuration",
          "properties": {
            "IPAccessPolicy": {
              "default": "allow",
              "description": "Controls how IPAddressGroups are handled - deny: deny these groups - allow: only allow these groups",
              "enum": [
                "allow",
                "deny"
              ],
              "type": "string"
            },
            "IPAddressGroups": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "RuleSet": {
              "additionalProperties": false,
              "description": "Ruleset details. Only one active per account",
              "properties": {
                "Name": {
                  "default": "account-default",
                  "description": "Name of the ruleset",
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "aws:ecsAccountSettings": {
          "default": {
            "awsvpcTrunking": true,
            "containerInsights": true
          },
          "description": "AWS manage account level configuration of the Elastic Container Service",
          "type": "object"
        }
      },
      "required": [
        "Seed"
      ],
      "type": "object"
    },
    "Environment": {
      "additionalProperties": false,
      "description": "The environment layer",
      "properties": {
        "Category": {
          "type": "string"
        },
        "Data": {
          "additionalProperties": false,
          "properties": {
            "Expiration": {
              "type": "number"
            },
            "Offline": {
              "type": "number"
            },
            "Public": {
              "additionalProperties": false,
              "properties": {
                "Enabled": {
                  "default": false,
                  "type": "boolean"
                },
                "IPAddressGroups": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "Description": {
          "type": "string"
        },
        "DomainBehaviours": {
          "additionalProperties": false,
          "properties": {
            "Segment": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "FlowLogs": {
          "additionalProperties": false,
          "properties": {
            "Enabled": {
              "default": false,
              "description": "Deprecated - here to override automatically added enabled attribute",
              "type": "boolean"
            },
            "Expiration": {
              "default": 7,
              "type": "number"
            }
          },
          "type": "object"
        },
        "Id": {
          "type": "string"
        },
        "Name": {
          "type": "string"
        },
        "OSPatching": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/ospatching"
        },
        "Operations": {
          "additionalProperties": false,
          "properties": {
            "DeadLetterQueue": {
              "additionalProperties": false,
              "properties": {
                "Enabled": {
                  "default": false,
                  "type": "boolean"
                },
                "MaxReceives": {
                  "default": 3,
                  "type": "number"
                }
              },
              "type": "object"
            },
            "Expiration": {
              "default": 7,
              "type": "number"
            },
            "FlowLogs": {
              "additionalProperties": false,
              "properties": {
                "Enabled": {
                  "type": "boolean"
                },
                "Expiration": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "Offline": {
              "type": "number"
            }
          },
          "type": "object"
        },
        "Profiles": {
          "additionalProperties": false,
          "properties": {
            "Deployment": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "Policy": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "Region": {
          "type": "string"
        },
        "Title": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "Product": {
      "additionalProperties": false,
      "description": "A product layer",
      "properties": {
        "*": {
          "additionalProperties": false,
          "description": "Individual deployment-unit configuration overrides. Attribute must match the DeploymentUnit value.",
          "properties": {
            "Region": {
              "description": "An override of the Region for a single DeploymentUnit.",
              "type": "string"
            }
          },
          "type": "object"
        },
        "Builds": {
          "additionalProperties": false,
          "properties": {
            "Code": {
              "additionalProperties": false,
              "properties": {
                "Environment": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "Data": {
              "additionalProperties": false,
              "properties": {
                "Environment": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "CertificateBehaviours": {
          "additionalProperties": false,
          "properties": {
            "Domain": {
              "type": "string"
            },
            "External": {
              "type": "boolean"
            },
            "Host": {
              "type": "string"
            },
            "HostParts": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "IncludeInDomain": {
              "additionalProperties": false,
              "properties": {
                "Environment": {
                  "type": "boolean"
                },
                "Product": {
                  "type": "boolean"
                },
                "Segment": {
                  "type": "boolean"
                }
              },
              "type": "object"
            },
            "IncludeInHost": {
              "additionalProperties": false,
              "properties": {
                "Component": {
                  "type": "boolean"
                },
                "Environment": {
                  "type": "boolean"
                },
                "Host": {
                  "type": "boolean"
                },
                "Instance": {
                  "type": "boolean"
                },
                "Product": {
                  "type": "boolean"
                },
                "Segment": {
                  "type": "boolean"
                },
                "Tier": {
                  "type": "boolean"
                },
                "Version": {
                  "type": "boolean"
                }
              },
              "type": "object"
            },
            "Wildcard": {
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "DeploymentProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Modes": {
                  "description": "A nested object with the deployment mode name as the root and childs based on component types",
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        },
        "Domain": {
          "type": "string"
        },
        "LinkRefs": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
        },
        "Modules": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/module"
        },
        "PlacementProfiles": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/placementprofile"
        },
        "Plugins": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/plugin"
        },
        "PolicyProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Modes": {
                  "description": "A nested object with the deployment mode name as the root and childs based on component types",
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        },
        "Profiles": {
          "additionalProperties": false,
          "properties": {
            "Deployment": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "Placement": {
              "type": "string"
            },
            "Policy": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "Region": {
          "type": "string"
        },
        "SES": {
          "additionalProperties": false,
          "properties": {
            "Region": {
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "Segment": {
      "additionalProperties": false,
      "description": "A segment layer",
      "properties": {
        "Bastion": {
          "additionalProperties": false,
          "properties": {
            "Active": {
              "default": false,
              "type": "boolean"
            },
            "Enabled": {
              "default": true,
              "type": "boolean"
            },
            "IPAddressGroups": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "Category": {
          "type": "string"
        },
        "Data": {
          "additionalProperties": false,
          "properties": {
            "Expiration": {
              "type": [
                "number",
                "string"
              ]
            },
            "Offline": {
              "type": [
                "number",
                "string"
              ]
            }
          },
          "type": "object"
        },
        "Description": {
          "type": "string"
        },
        "IPAddressGroups": {
          "contains": {
            "type": [
              "string"
            ]
          },
          "type": "array"
        },
        "Id": {
          "type": "string"
        },
        "Modules": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/module"
        },
        "Name": {
          "type": "string"
        },
        "Network": {
          "additionalProperties": false,
          "properties": {
            "CIDR": {
              "additionalProperties": false,
              "properties": {
                "Address": {
                  "type": "string"
                },
                "Enabled": {
                  "default": true,
                  "type": "boolean"
                },
                "Mask": {
                  "default": 0,
                  "type": "number"
                }
              },
              "type": "object"
            },
            "DNSHostnames": {
              "type": "boolean"
            },
            "DNSSupport": {
              "type": "boolean"
            },
            "InternetAccess": {
              "default": true,
              "type": "boolean"
            },
            "Tiers": {
              "additionalProperties": false,
              "properties": {
                "Order": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                }
              },
              "type": "object"
            },
            "Zones": {
              "additionalProperties": false,
              "properties": {
                "Order": {
                  "contains": {
                    "type": [
                      "string"
                    ]
                  },
                  "type": "array"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "Operations": {
          "additionalProperties": false,
          "properties": {
            "Expiration": {
              "type": [
                "number",
                "string"
              ]
            },
            "FlowLogs": {
              "additionalProperties": false,
              "properties": {
                "Enabled": {
                  "default": false,
                  "description": "Deprecated - here to override automatically added enabled attribute",
                  "type": "boolean"
                },
                "Expiration": {
                  "type": [
                    "number",
                    "string"
                  ]
                }
              },
              "type": "object"
            },
            "Offline": {
              "type": [
                "number",
                "string"
              ]
            }
          },
          "type": "object"
        },
        "Plugins": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/plugin"
        },
        "Profiles": {
          "additionalProperties": false,
          "properties": {
            "Deployment": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "Policy": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "Region": {
          "type": "string"
        },
        "RotateKeys": {
          "default": true,
          "type": "boolean"
        },
        "S3": {
          "additionalProperties": false,
          "properties": {
            "IncludeTenant": {
              "default": false,
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "Tiers": {
          "additionalProperties": false,
          "properties": {
            "Order": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "Title": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "Tenant": {
      "additionalProperties": false,
      "description": "A tenant layer",
      "properties": {
        "CertificateBehaviours": {
          "additionalProperties": false,
          "properties": {
            "Domain": {
              "type": "string"
            },
            "External": {
              "type": "boolean"
            },
            "Host": {
              "type": "string"
            },
            "HostParts": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "IncludeInDomain": {
              "additionalProperties": false,
              "properties": {
                "Environment": {
                  "type": "boolean"
                },
                "Product": {
                  "type": "boolean"
                },
                "Segment": {
                  "type": "boolean"
                }
              },
              "type": "object"
            },
            "IncludeInHost": {
              "additionalProperties": false,
              "properties": {
                "Component": {
                  "type": "boolean"
                },
                "Environment": {
                  "type": "boolean"
                },
                "Host": {
                  "type": "boolean"
                },
                "Instance": {
                  "type": "boolean"
                },
                "Product": {
                  "type": "boolean"
                },
                "Segment": {
                  "type": "boolean"
                },
                "Tier": {
                  "type": "boolean"
                },
                "Version": {
                  "type": "boolean"
                }
              },
              "type": "object"
            },
            "Wildcard": {
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "DeploymentProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Modes": {
                  "description": "A nested object with the deployment mode name as the root and childs based on component types",
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        },
        "Description": {
          "type": "string"
        },
        "Id": {
          "type": "string"
        },
        "LinkRefs": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/link"
        },
        "Modules": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/module"
        },
        "Name": {
          "type": "string"
        },
        "PlacementProfiles": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/placementprofile"
        },
        "Plugins": {
          "$ref": "https://docs.hamlet.io/schema/latest/AttributeSet-schema.json#/definitions/plugin"
        },
        "PolicyProfiles": {
          "additionalProperties": false,
          "patternProperties": {
            "^[A-Za-z_][A-Za-z0-9_-]*$": {
              "properties": {
                "Modes": {
                  "description": "A nested object with the deployment mode name as the root and childs based on component types",
                  "type": "object"
                }
              }
            }
          },
          "type": "object"
        },
        "Profiles": {
          "additionalProperties": false,
          "properties": {
            "Deployment": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            },
            "Placement": {
              "type": "string"
            },
            "Policy": {
              "contains": {
                "type": [
                  "string"
                ]
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "Region": {
          "type": "string"
        },
        "Title": {
          "type": "string"
        }
      },
      "type": "object"
    }
  }
}
